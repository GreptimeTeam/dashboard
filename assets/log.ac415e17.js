import{d as E,aH as c,C as t,aE as s,b5 as A,aG as o,aI as n,G as l,aM as a,D as r,aK as b,aJ as w,aL as g,u as p,aF as h}from"./arco.a57ec162.js";import{g as F,s as L}from"./vue.3c21c30b.js";import{c as x,u as D,_ as G}from"./index.61bbd04d.js";const M={class:"code"},Q={class:"width-35"},j={key:2,class:"script"},H={key:0},J={key:1},K={class:"start-time"},O={key:1,class:"total-time"},R=E({__name:"log",props:{log:{type:Object,default:()=>({})},codeType:{type:String,default:"sql"},hasAction:{type:Boolean,default:!0}},setup(e){const u=e;F(),L(x());const{inputFromNewLineToQueryCode:C,replaceCode:I}=D(),{updateSettings:T}=x(),_=Reflect.has(u.log,"execution_time_ms"),$=()=>{T({queryModalVisible:!0}),u.log.type==="sql"?C(u.log.codeInfo,0):I(u.log.codeInfo)};return(d,P)=>{const N=c("icon-play-arrow"),S=c("a-button"),B=c("a-tooltip"),v=c("a-typography-text"),f=c("a-list-item"),V=c("a-list"),k=c("a-popover"),q=c("icon-check-circle"),z=c("icon-close-circle"),m=c("a-space");return t(),s(f,{class:"smaller-divider"},A({default:o(()=>[n(m,{direction:"vertical",fill:"",size:0},{default:o(()=>[l("div",M,[e.log.error?(t(),s(B,{key:0,content:e.log.error},{default:o(()=>[l("div",null,a(e.log.error),1)]),_:1},8,["content"])):e.log.type!=="python"?(t(),s(k,{key:1,"content-class":"code-popup"},{content:o(()=>[n(V,{size:"small",split:!1,bordered:!1},{default:o(()=>[e.log.type==="promql"?(t(!0),r(b,{key:0},w(e.log.promInfo,(i,y)=>(t(),s(f,null,{default:o(()=>[l("span",Q,a(y),1),n(v,{class:"ml-4",code:""},{default:o(()=>[g(a(i),1)]),_:2},1024)]),_:2},1024))),256)):(t(),s(f,{key:1},{default:o(()=>[n(v,{class:"popup"},{default:o(()=>[g(a(e.log.codeInfo),1)]),_:1})]),_:1}))]),_:1})]),default:o(()=>[l("div",null,a(e.log.codeInfo),1)]),_:1})):(t(),r("div",j,[p(_)?(t(),r("div",H,a(d.$t("dashboard.runScript",{name:e.log.codeInfo})),1)):(t(),r("div",J,a(d.$t("dashboard.saveName",{name:e.log.codeInfo})),1))]))]),n(m,{class:"info",fill:""},{default:o(()=>[e.log.error?(t(),s(z,{key:1,class:"danger-color"})):(t(),s(q,{key:0,class:"success-color icon-14"})),l("div",K,a(e.log.startTime),1),e.log.error?h("",!0):(t(),s(m,{key:2,class:"result",fill:"",size:4},{default:o(()=>[p(_)?(t(),s(m,{key:0,size:0},{split:o(()=>[g(";")]),default:o(()=>[(t(!0),r(b,null,w(e.log.results,(i,y)=>(t(),r("span",{key:y},a(i.records>=0?d.$tc("dashboard.select",i.records,{records:i.records}):d.$tc("dashboard.affected",i.affectedRows,{record:i.affectedRows})),1))),128))]),_:1})):h("",!0),p(_)?(t(),r("div",O,[n(k,{"content-class":"total-time-popover"},{content:o(()=>[l("div",null,a(d.$t("dashboard.executeTime",{time:e.log.execution_time_ms})),1),l("div",null,a(d.$t("dashboard.network",{time:e.log.networkTime-e.log.execution_time_ms})),1)]),default:o(()=>[l("div",null,a(`in ${e.log.networkTime} ms`),1)]),_:1})])):h("",!0)]),_:1}))]),_:1})]),_:1})]),_:2},[e.hasAction&&e.log.type!=="python"&&!e.log.error?{name:"actions",fn:o(()=>[n(S,{class:"play",type:"text",onClick:$},{icon:o(()=>[n(N,{class:"icon-color"})]),_:1})]),key:"0"}:void 0]),1024)}}});const Y=G(R,[["__scopeId","data-v-88ca4bce"]]);export{Y as _};
