import{L as Ca,a as Zt,E as Ea,i as qa,c as Da,f as Ma,s as Wt,t as y,b as jt,d as Ra,e as La,g as dt,h as ce,l as Aa,o as Ee,k as qe,j as Va,T as Tt,_ as Ya}from"./index.1eb7efd0.js";import{d as ye,e as H,c as K,aI as g,D as _,aF as X,aH as f,aJ as O,F as de,aW as Ht,u as h,aQ as fe,aX as Jt,E as R,aL as he,aK as me,aM as Y,aN as D,k as ft,aY as Ve,aZ as Ye,H as $,r as Na,w as Ua,a_ as Ia,a$ as Ba,G as za,aG as Je,b0 as ze,o as Fa,b1 as Ga,b as Za,b2 as wt,b3 as Wa,b4 as ja}from"./arco.a18c68e0.js";import{_ as _e,u as Ha,q as Ja,d as Ka,a as en,t as tn,b as se,l as Kt,c as an,e as nn,f as rn,r as Xt,g as on}from"./index.f347600c.js";import{u as Ke}from"./query-code.6c957bc8.js";import{s as Ne,g as sn,h as ln}from"./vue.f3f254d8.js";import"./empty-status.vue_vue_type_script_setup_true_name_EmptyStatus_lang.edca38da.js";import"./chart.4f759cbb.js";const ea=t=>(Ve("data-v-95ebde6d"),t=t(),Ye(),t),cn=ea(()=>$("svg",{class:"icon-18"},[$("use",{href:"#time"})],-1)),un={key:0},dn={key:1},fn=ea(()=>$("div",{style:{width:"4px"}},null,-1)),pn=ye({__name:"index",props:{timeLength:{type:Number,default:10},timeRange:{type:Array,default:[]},flexDirection:{type:String,default:"row"},buttonClass:{type:String,default:""},buttonType:{type:String,default:"text"},relativeTimeOptions:{type:Array,default:[]},relativeTimeMap:{type:Object,default:()=>({})}},emits:["update:timeLength","update:timeRange"],setup(t,{emit:e}){const a=t,n=H(!1),i=H(!1),s=K(()=>a.timeLength!==0),o=c=>{e("update:timeRange",c),e("update:timeLength",0),i.value=!1},u=c=>{e("update:timeLength",c),i.value=!1},d=()=>{n.value=!n.value},l=()=>{i.value=!i.value};return(c,b)=>{const v=g("a-button"),k=g("a-range-picker"),q=g("a-doption"),S=g("a-space"),m=g("a-trigger");return _(),X(m,{"popup-visible":h(i),"onUpdate:popupVisible":b[1]||(b[1]=E=>ft(i)?i.value=E:null),trigger:"click",position:t.flexDirection==="row"?"br":"bl","update-at-scroll":!0,onClick:l},{content:f(()=>[O(S,{fill:"",align:"start",size:0,class:de(t.flexDirection)},{split:f(()=>[fn]),default:f(()=>[Ht(O(k,{class:"no-border box-shadow","hide-trigger":"",format:"YYYY-MM-DD HH:mm:ss","value-format":"X",position:"bl","model-value":a.timeRange,"show-time":!0,disabledDate:E=>h(fe)(E).isAfter(h(fe)()),"trigger-props":{"update-at-scroll":!0},placeholder:[c.$t("dashboard.startTime"),c.$t("dashboard.endTime")],onOk:b[0]||(b[0]=E=>o(E))},null,8,["model-value","disabledDate","placeholder"]),[[Jt,h(n)]]),O(S,{class:"trigger relative-time-dropdown",fill:"",direction:"vertical",size:2},{default:f(()=>[(_(!0),R(he,null,me(t.relativeTimeOptions,E=>(_(),X(q,{value:E.value,class:de(E.value===t.timeLength?"selected":""),onClick:C=>u(E.value)},{default:f(()=>[Y(D(E.label),1)]),_:2},1032,["value","class","onClick"]))),256)),O(q,{class:de(h(s)?"":"selected"),onClick:d},{default:f(()=>[Y("Custom")]),_:1},8,["class"])]),_:1})]),_:1},8,["class"])]),default:f(()=>[O(v,{type:t.buttonType,class:de(t.buttonClass)},{icon:f(()=>[cn]),default:f(()=>[h(s)?(_(),R("div",un,D(t.relativeTimeMap[t.timeLength]),1)):(_(),R("div",dn,D(`${h(fe).unix(t.timeRange[0]).format("YYYY-MM-DD HH:mm:ss")} - ${h(fe).unix(t.timeRange[1]).format("YYYY-MM-DD HH:mm:ss")} `),1))]),_:1},8,["type","class"])]),_:1},8,["popup-visible","position"])}}});const hn=_e(pn,[["__scopeId","data-v-95ebde6d"]]),mn=36,Ct=1,On=2,$e=3,Fe=4,vn=5,gn=6,yn=7,_n=8,bn=9,$n=10,Qn=11,kn=12,Pn=13,xn=14,Sn=15,Tn=16,wn=17,Et=18,Xn=19,ta=20,aa=21,qt=22,Cn=23,En=24;function et(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function qn(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function ne(t,e,a){for(let n=!1;;){if(t.next<0)return;if(t.next==e&&!n){t.advance();return}n=a&&!n&&t.next==92,t.advance()}}function Dn(t){for(;;){if(t.next<0||t.peek(1)<0)return;if(t.next==36&&t.peek(1)==36){t.advance(2);return}t.advance()}}function Mn(t,e){let a="[{<(".indexOf(String.fromCharCode(e)),n=a<0?e:"]}>)".charCodeAt(a);for(;;){if(t.next<0)return;if(t.next==n&&t.peek(1)==39){t.advance(2);return}t.advance()}}function na(t,e){for(;!(t.next!=95&&!et(t.next));)e!=null&&(e+=String.fromCharCode(t.next)),t.advance();return e}function Rn(t){if(t.next==39||t.next==34||t.next==96){let e=t.next;t.advance(),ne(t,e,!1)}else na(t)}function Dt(t,e){for(;t.next==48||t.next==49;)t.advance();e&&t.next==e&&t.advance()}function Mt(t,e){for(;;){if(t.next==46){if(e)break;e=!0}else if(t.next<48||t.next>57)break;t.advance()}if(t.next==69||t.next==101)for(t.advance(),(t.next==43||t.next==45)&&t.advance();t.next>=48&&t.next<=57;)t.advance()}function Rt(t){for(;!(t.next<0||t.next==10);)t.advance()}function ae(t,e){for(let a=0;a<e.length;a++)if(e.charCodeAt(a)==t)return!0;return!1}const Ge=` 	\r
`;function ia(t,e,a){let n=Object.create(null);n.true=n.false=vn,n.null=n.unknown=gn;for(let i of t.split(" "))i&&(n[i]=ta);for(let i of e.split(" "))i&&(n[i]=aa);for(let i of(a||"").split(" "))i&&(n[i]=En);return n}const Ln="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",An="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",tt={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',words:ia(An,Ln)};function Vn(t,e,a,n){let i={};for(let s in tt)i[s]=(t.hasOwnProperty(s)?t:tt)[s];return e&&(i.words=ia(e,a||"",n)),i}function ra(t){return new Ea(e=>{var a;let{next:n}=e;if(e.advance(),ae(n,Ge)){for(;ae(e.next,Ge);)e.advance();e.acceptToken(mn)}else if(n==36&&e.next==36&&t.doubleDollarQuotedStrings)Dn(e),e.acceptToken($e);else if(n==39||n==34&&t.doubleQuotedStrings)ne(e,n,t.backslashEscapes),e.acceptToken($e);else if(n==35&&t.hashComments||n==47&&e.next==47&&t.slashComments)Rt(e),e.acceptToken(Ct);else if(n==45&&e.next==45&&(!t.spaceAfterDashes||e.peek(1)==32))Rt(e),e.acceptToken(Ct);else if(n==47&&e.next==42){e.advance();for(let i=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(i--,e.advance(),!i)break}else s==47&&e.next==42&&(i++,e.advance())}e.acceptToken(On)}else if((n==101||n==69)&&e.next==39)e.advance(),ne(e,39,!0);else if((n==110||n==78)&&e.next==39&&t.charSetCasts)e.advance(),ne(e,39,t.backslashEscapes),e.acceptToken($e);else if(n==95&&t.charSetCasts)for(let i=0;;i++){if(e.next==39&&i>1){e.advance(),ne(e,39,t.backslashEscapes),e.acceptToken($e);break}if(!et(e.next))break;e.advance()}else if(t.plsqlQuotingMechanism&&(n==113||n==81)&&e.next==39&&e.peek(1)>0&&!ae(e.peek(1),Ge)){let i=e.peek(1);e.advance(2),Mn(e,i),e.acceptToken($e)}else if(n==40)e.acceptToken(yn);else if(n==41)e.acceptToken(_n);else if(n==123)e.acceptToken(bn);else if(n==125)e.acceptToken($n);else if(n==91)e.acceptToken(Qn);else if(n==93)e.acceptToken(kn);else if(n==59)e.acceptToken(Pn);else if(t.unquotedBitLiterals&&n==48&&e.next==98)e.advance(),Dt(e),e.acceptToken(qt);else if((n==98||n==66)&&(e.next==39||e.next==34)){const i=e.next;e.advance(),t.treatBitsAsBytes?(ne(e,i,t.backslashEscapes),e.acceptToken(Cn)):(Dt(e,i),e.acceptToken(qt))}else if(n==48&&(e.next==120||e.next==88)||(n==120||n==88)&&e.next==39){let i=e.next==39;for(e.advance();qn(e.next);)e.advance();i&&e.next==39&&e.advance(),e.acceptToken(Fe)}else if(n==46&&e.next>=48&&e.next<=57)Mt(e,!0),e.acceptToken(Fe);else if(n==46)e.acceptToken(xn);else if(n>=48&&n<=57)Mt(e,!1),e.acceptToken(Fe);else if(ae(n,t.operatorChars)){for(;ae(e.next,t.operatorChars);)e.advance();e.acceptToken(Sn)}else if(ae(n,t.specialVar))e.next==n&&e.advance(),Rn(e),e.acceptToken(wn);else if(ae(n,t.identifierQuotes))ne(e,n,!1),e.acceptToken(Xn);else if(n==58||n==44)e.acceptToken(Tn);else if(et(n)){let i=na(e,String.fromCharCode(n));e.acceptToken(e.next==46?Et:(a=t.words[i.toLowerCase()])!==null&&a!==void 0?a:Et)}})}const oa=ra(tt),Yn=jt.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"\u26A0 LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,oa],topRules:{Script:[0,25]},tokenPrec:0});function at(t){let e=t.cursor().moveTo(t.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function Pe(t,e){let a=t.sliceString(e.from,e.to),n=/^([`'"])(.*)\1$/.exec(a);return n?n[2]:a}function Me(t){return t&&(t.name=="Identifier"||t.name=="QuotedIdentifier")}function Nn(t,e){if(e.name=="CompositeIdentifier"){let a=[];for(let n=e.firstChild;n;n=n.nextSibling)Me(n)&&a.push(Pe(t,n));return a}return[Pe(t,e)]}function Lt(t,e){for(let a=[];;){if(!e||e.name!=".")return a;let n=at(e);if(!Me(n))return a;a.unshift(Pe(t,n)),e=at(n)}}function Un(t,e){let a=dt(t).resolveInner(e,-1),n=Bn(t.doc,a);return a.name=="Identifier"||a.name=="QuotedIdentifier"||a.name=="Keyword"?{from:a.from,quoted:a.name=="QuotedIdentifier"?t.doc.sliceString(a.from,a.from+1):null,parents:Lt(t.doc,at(a)),aliases:n}:a.name=="."?{from:e,quoted:null,parents:Lt(t.doc,a),aliases:n}:{from:e,quoted:null,parents:[],empty:!0,aliases:n}}const In=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function Bn(t,e){let a;for(let i=e;!a;i=i.parent){if(!i)return null;i.name=="Statement"&&(a=i)}let n=null;for(let i=a.firstChild,s=!1,o=null;i;i=i.nextSibling){let u=i.name=="Keyword"?t.sliceString(i.from,i.to).toLowerCase():null,d=null;if(!s)s=u=="from";else if(u=="as"&&o&&Me(i.nextSibling))d=Pe(t,i.nextSibling);else{if(u&&In.has(u))break;o&&Me(i)&&(d=Pe(t,i))}d&&(n||(n=Object.create(null)),n[d]=Nn(t,o)),o=/Identifier$/.test(i.name)?i:null}return n}function zn(t,e){return t?e.map(a=>Object.assign(Object.assign({},a),{label:t+a.label+t,apply:void 0})):e}const Fn=/^\w*$/,Gn=/^[`'"]?\w*[`'"]?$/;class pt{constructor(){this.list=[],this.children=void 0}child(e,a){let n=this.children||(this.children=Object.create(null)),i=n[e];return i||(e&&this.list.push(sa(e,"type",a)),n[e]=new pt)}addCompletions(e){for(let a of e){let n=this.list.findIndex(i=>i.label==a.label);n>-1?this.list[n]=a:this.list.push(a)}}}function sa(t,e,a){return/[^\w\xb5-\uffff]/.test(t)?{label:t,type:e,apply:a+t+a}:{label:t,type:e}}function Zn(t,e,a,n,i,s){var o;let u=new pt,d=((o=s==null?void 0:s.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',l=u.child(i||"",d);for(let c in t){let b=c.replace(/\\?\./g,k=>k=="."?"\0":k).split("\0"),v=b.length==1?l:u;for(let k of b)v=v.child(k.replace(/\\\./g,"."),d);for(let k of t[c])k&&v.list.push(typeof k=="string"?sa(k,"property",d):k)}return e&&l.addCompletions(e),a&&u.addCompletions(a),u.addCompletions(l.list),n&&u.addCompletions(l.child(n,d).list),c=>{let{parents:b,from:v,quoted:k,empty:q,aliases:S}=Un(c.state,c.pos);if(q&&!c.explicit)return null;S&&b.length==1&&(b=S[b[0]]||b);let m=u;for(let V of b){for(;!m.children||!m.children[V];)if(m==u)m=l;else if(m==l&&n)m=m.child(n,d);else return null;m=m.child(V,d)}let E=k&&c.state.sliceDoc(c.pos,c.pos+1)==k,C=m.list;return m==u&&S&&(C=C.concat(Object.keys(S).map(V=>({label:V,type:"constant"})))),{from:v,to:E?c.pos+1:void 0,options:zn(k,C),validFor:k?Gn:Fn}}}function Wn(t,e){let a=Object.keys(t).map(n=>({label:e?n.toUpperCase():n,type:t[n]==aa?"type":t[n]==ta?"keyword":"variable",boost:-1}));return Ra(["QuotedIdentifier","SpecialVar","String","LineComment","BlockComment","."],La(a))}let jn=Yn.configure({props:[qa.add({Statement:Da()}),Ma.add({Statement(t){return{from:t.firstChild.to,to:t.to}},BlockComment(t){return{from:t.from+2,to:t.to-2}}}),Wt({Keyword:y.keyword,Type:y.typeName,Builtin:y.standard(y.name),Bits:y.number,Bytes:y.string,Bool:y.bool,Null:y.null,Number:y.number,String:y.string,Identifier:y.name,QuotedIdentifier:y.special(y.string),SpecialVar:y.special(y.name),LineComment:y.lineComment,BlockComment:y.blockComment,Operator:y.operator,"Semi Punctuation":y.punctuation,"( )":y.paren,"{ }":y.brace,"[ ]":y.squareBracket})]});class ht{constructor(e,a,n){this.dialect=e,this.language=a,this.spec=n}get extension(){return this.language.extension}static define(e){let a=Vn(e,e.keywords,e.types,e.builtin),n=Zt.define({name:"sql",parser:jn.configure({tokenizers:[{from:oa,to:ra(a)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new ht(a,n,e)}}function Hn(t,e=!1){return Wn(t.dialect.words,e)}function Jn(t,e=!1){return t.language.data.of({autocomplete:Hn(t,e)})}function Kn(t){return t.schema?Zn(t.schema,t.tables,t.schemas,t.defaultTable,t.defaultSchema,t.dialect||mt):()=>null}function ei(t){return t.schema?(t.dialect||mt).language.data.of({autocomplete:Kn(t)}):[]}function At(t={}){let e=t.dialect||mt;return new Ca(e.language,[ei(t),Jn(e,!!t.upperCaseKeywords)])}const mt=ht.define({}),ti=147,ai=148,ni=1,ii=2,ri=3,oi=4,si=5,li=6,ci=7,ui=8,di=9,fi=10,pi=11,hi=12,mi=13,Oi=14,vi=15,gi=16,yi=17,_i=18,bi=19,$i=20,Qi=21,ki=22,Pi=23,xi=24,Si=25,Ti=26,wi={inf:ti,nan:ai,bool:ni,ignoring:ii,on:ri,group_left:oi,group_right:si,offset:li},Vt=(t,e)=>wi[t.toLowerCase()]||-1,Xi={avg:ui,atan2:ci,bottomk:di,count:fi,count_values:pi,group:hi,max:mi,min:Oi,quantile:vi,stddev:gi,stdvar:yi,sum:_i,topk:bi,by:$i,without:Qi,and:ki,or:Pi,unless:xi,start:Si,end:Ti},Yt=(t,e)=>Xi[t.toLowerCase()]||-1,Ci=Wt({LineComment:y.comment,LabelName:y.labelName,StringLiteral:y.string,NumberLiteral:y.number,Duration:y.number,Identifier:y.variableName,"Abs Absent AbsentOverTime Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramCount HistogramFraction HistogramQuantile HistogramSum HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Time Timestamp Vector Year":y.function(y.variableName),"Avg Bottomk Count Count_values Group Max Min Quantile Stddev Stdvar Sum Topk":y.operatorKeyword,"By Without Bool On Ignoring GroupLeft GroupRight Offset Start End":y.modifier,"And Unless Or":y.logicOperator,"Sub Add Mul Mod Div Atan2 Eql Neq Lte Lss Gte Gtr EqlRegex EqlSingle NeqRegex Pow At":y.operator,UnaryOp:y.arithmeticOperator,"( )":y.paren,"[ ]":y.squareBracket,"{ }":y.brace,"\u26A0":y.invalid}),Ei={__proto__:null,absent_over_time:313,absent:315,abs:317,acos:319,acosh:321,asin:323,asinh:325,atan:327,atanh:329,avg_over_time:331,ceil:333,changes:335,clamp:337,clamp_max:339,clamp_min:341,cos:343,cosh:345,count_over_time:347,days_in_month:349,day_of_month:351,day_of_week:353,day_of_year:355,deg:357,delta:359,deriv:361,exp:363,floor:365,histogram_count:367,histogram_fraction:369,histogram_quantile:371,histogram_sum:373,holt_winters:375,hour:377,idelta:379,increase:381,irate:383,label_replace:385,label_join:387,last_over_time:389,ln:391,log10:393,log2:395,max_over_time:397,min_over_time:399,minute:401,month:403,pi:405,predict_linear:407,present_over_time:409,quantile_over_time:411,rad:413,rate:415,resets:417,round:419,scalar:421,sgn:423,sin:425,sinh:427,sort:429,sort_desc:431,sqrt:433,stddev_over_time:435,stdvar_over_time:437,sum_over_time:439,tan:441,tanh:443,timestamp:445,time:447,vector:449,year:451},qi=jt.deserialize({version:14,states:"7pOYQPOOO'XQPOOOOQO'#Cz'#CzO'^QPO'#CyQ'iQQOOOOQO'#Da'#DaO'dQPO'#D`OOQO'#E}'#E}O(vQPO'#FTOYQPO'#FPOYQPO'#FSO/OQSO'#FVO/WQQO'#FUOOQO'#FU'#FUOOQO'#Fi'#FiOOQO'#Db'#DbOOQO'#Dd'#DdOOQO'#De'#DeOOQO'#Df'#DfOOQO'#Dg'#DgOOQO'#Dh'#DhOOQO'#Di'#DiOOQO'#Dj'#DjOOQO'#Dk'#DkOOQO'#Dl'#DlOOQO'#Dm'#DmOOQO'#Dn'#DnOOQO'#Do'#DoOOQO'#Dp'#DpOOQO'#Dq'#DqOOQO'#Dr'#DrOOQO'#Ds'#DsOOQO'#Dt'#DtOOQO'#Du'#DuOOQO'#Dv'#DvOOQO'#Dw'#DwOOQO'#Dx'#DxOOQO'#Dy'#DyOOQO'#Dz'#DzOOQO'#D{'#D{OOQO'#D|'#D|OOQO'#D}'#D}OOQO'#EO'#EOOOQO'#EP'#EPOOQO'#EQ'#EQOOQO'#ER'#EROOQO'#ES'#ESOOQO'#ET'#ETOOQO'#EU'#EUOOQO'#EV'#EVOOQO'#EW'#EWOOQO'#EX'#EXOOQO'#EY'#EYOOQO'#EZ'#EZOOQO'#E['#E[OOQO'#E]'#E]OOQO'#E^'#E^OOQO'#E_'#E_OOQO'#E`'#E`OOQO'#Ea'#EaOOQO'#Eb'#EbOOQO'#Ec'#EcOOQO'#Ed'#EdOOQO'#Ee'#EeOOQO'#Ef'#EfOOQO'#Eg'#EgOOQO'#Eh'#EhOOQO'#Ei'#EiOOQO'#Ej'#EjOOQO'#Ek'#EkOOQO'#El'#ElOOQO'#Em'#EmOOQO'#En'#EnOOQO'#Eo'#EoOOQO'#Ep'#EpOOQO'#Eq'#EqOOQO'#Er'#ErOOQO'#Es'#EsOOQO'#Et'#EtOOQO'#Eu'#EuOOQO'#Ev'#EvOOQO'#Ew'#EwOOQO'#Ex'#ExOOQO'#Ey'#EyOOQO'#Ez'#EzQOQPOOO0qQPO'#C{O0vQPO'#DOO'dQPO,59eO0}QQO,59eO2kQPO,59kO2kQPO,59kO2kQPO,59kO2kQPO,59kO2kQPO,59kO8sQQO,5;gO8xQQO,5;jO9QQPO,5;wOOQO,59z,59zOOQO,5;i,5;iO9iQQO,5;kO9pQQO,5;nO;WQPO'#FWOOQO,5;q,5;qO;fQPO,5;qOOQO,5;p,5;pO;nQSO'#C|OOQO,59g,59gOOQO,59j,59jO;vQQO,59jOOQO1G/P1G/POOQO'#DR'#DRO0qQPO'#DSOOQO'#Fm'#FmO<QQPO'#FmOYQPO1G/VOYQPO1G/VOYQPO1G/VOYQPO1G/VOYQPO1G/VOBVQSO1G1ROOQO1G1U1G1UOB_QQO1G1UOBdQPO'#E}OOQO'#F_'#F_OOQO1G1c1G1cOBoQPO1G1cOOQO1G1V1G1VOOQO'#FX'#FXOBtQPO,5;rOByQSO1G1]OCRQPO1G1]OOQO1G1]1G1]OOQO,59h,59hOCZQPO,59hOYQPO'#FbOCcQPO1G/UOOQO1G/U1G/UOCkQPO,59nOOQO,5<X,5<XOJzQQO7+$qOK[QQO7+$qOLpQQO7+$qOMWQQO7+$qONoQQO7+$qOOQO7+&m7+&mO! YQQO7+&sOOQO7+&p7+&pO! bQPO7+&}OOQO1G1^1G1^OOQO,5;},5;}OOQO7+&w7+&wO! gQSO7+&wOOQO-E9a-E9aO! oQSO1G/SO! wQPO1G/SOOQO1G/S1G/SO!!PQQO,5;|OOQO-E9`-E9`OOQO7+$p7+$pO!!ZQPO1G/YOOQO<<J_<<J_O!(YQPO<<J_OOQO<<Ji<<JiOOQO<<Jc<<JcP!(_QSO'#FcOOQO,5;{,5;{OOQO7+$n7+$nO!(dQSO7+$nOOQO-E9_-E9_OOQO7+$t7+$tOOQOAN?yAN?yOOQO<<HY<<HYP!(lQSO'#Fa",stateData:"!(q~O$[OSkOS~OWQOXQOYQOZQO[QO]QO^QO_QO`QOaQObQOcQO!V[O#t^O$XVO$YVO$^XO$b_O$c`O$daO$ebO$fcO$gdO$heO$ifO$jgO$khO$liO$mjO$nkO$olO$pmO$qnO$roO$spO$tqO$urO$vsO$wtO$xuO$yvO$zwO${xO$|yO$}zO%O{O%P|O%Q}O%R!OO%S!PO%T!QO%U!RO%V!SO%W!TO%X!UO%Y!VO%Z!WO%[!XO%]!YO%^!ZO%_![O%`!]O%a!^O%b!_O%c!`O%d!aO%e!bO%f!cO%g!dO%h!eO%i!fO%j!gO%k!hO%l!iO%m!jO%n!kO%o!lO%p!mO%q!nO%r!oO%s!pO%t!qO%u!rO%v!sO%w!tO%x!uO%y!vO%|WO%}WO&OVO&QZO~O!V!wO~Od!xOe!xO$^!yO~OU#SOV!|Of#POg#QOh#POt!|Ow!|Ox!|Oy!|Oz!}O{!}O|#OO}#OO!O#OO!P#OO!Q#OO!R#OO$Q#TO%z#RO~O$X#VO$Y#VO&O#VOW#wXX#wXY#wXZ#wX[#wX]#wX^#wX_#wX`#wXa#wXb#wXc#wX!V#wX#t#wX$X#wX$Y#wX$^#wX$b#wX$c#wX$d#wX$e#wX$f#wX$g#wX$h#wX$i#wX$j#wX$k#wX$l#wX$m#wX$n#wX$o#wX$p#wX$q#wX$r#wX$s#wX$t#wX$u#wX$v#wX$w#wX$x#wX$y#wX$z#wX${#wX$|#wX$}#wX%O#wX%P#wX%Q#wX%R#wX%S#wX%T#wX%U#wX%V#wX%W#wX%X#wX%Y#wX%Z#wX%[#wX%]#wX%^#wX%_#wX%`#wX%a#wX%b#wX%c#wX%d#wX%e#wX%f#wX%g#wX%h#wX%i#wX%j#wX%k#wX%l#wX%m#wX%n#wX%o#wX%p#wX%q#wX%r#wX%s#wX%t#wX%u#wX%v#wX%w#wX%x#wX%y#wX%|#wX%}#wX&O#wX&Q#wX~Oq#YO&R#ZO~O&QZOU#xXV#xXf#xXg#xXh#xXt#xXw#xXx#xXy#xXz#xX{#xX|#xX}#xX!O#xX!P#xX!Q#xX!R#xX$Q#xX$W#xX%z#xX$`#xX$_#xX~O$^#^O~O$`#`O~PYOd!xOe!xOUmaVmafmagmahmatmawmaxmaymazma{ma|ma}ma!Oma!Pma!Qma!Rma$Qma$Wma%zma$`ma$_ma~OP#cOQ#dOR#dOW$aPX$aPY$aPZ$aP[$aP]$aP^$aP_$aP`$aPa$aPb$aPc$aP!V$aP#t$aP$X$aP$Y$aP$^$aP$b$aP$c$aP$d$aP$e$aP$f$aP$g$aP$h$aP$i$aP$j$aP$k$aP$l$aP$m$aP$n$aP$o$aP$p$aP$q$aP$r$aP$s$aP$t$aP$u$aP$v$aP$w$aP$x$aP$y$aP$z$aP${$aP$|$aP$}$aP%O$aP%P$aP%Q$aP%R$aP%S$aP%T$aP%U$aP%V$aP%W$aP%X$aP%Y$aP%Z$aP%[$aP%]$aP%^$aP%_$aP%`$aP%a$aP%b$aP%c$aP%d$aP%e$aP%f$aP%g$aP%h$aP%i$aP%j$aP%k$aP%l$aP%m$aP%n$aP%o$aP%p$aP%q$aP%r$aP%s$aP%t$aP%u$aP%v$aP%w$aP%x$aP%y$aP%|$aP%}$aP&O$aP&Q$aP~O#p#lO~O{#nO#p#mO~Oi#pOj#pO$XVO$YVO%|#oO%}#oO&OVO~O$`#sO~P'iOt!|OU#vaV#vaf#vag#vah#vaw#vax#vay#vaz#va{#va|#va}#va!O#va!P#va!Q#va!R#va$Q#va$W#va%z#va$`#va$_#va~O!R#tO#|#tO#}#tO$O#tO~O$_#vO&R#xO~Oq#zO$`#yO~O$_#{O$`#}O~P'iOQ#dOR#dOW$aXX$aXY$aXZ$aX[$aX]$aX^$aX_$aX`$aXa$aXb$aXc$aX!V$aX#t$aX$X$aX$Y$aX$^$aX$b$aX$c$aX$d$aX$e$aX$f$aX$g$aX$h$aX$i$aX$j$aX$k$aX$l$aX$m$aX$n$aX$o$aX$p$aX$q$aX$r$aX$s$aX$t$aX$u$aX$v$aX$w$aX$x$aX$y$aX$z$aX${$aX$|$aX$}$aX%O$aX%P$aX%Q$aX%R$aX%S$aX%T$aX%U$aX%V$aX%W$aX%X$aX%Y$aX%Z$aX%[$aX%]$aX%^$aX%_$aX%`$aX%a$aX%b$aX%c$aX%d$aX%e$aX%f$aX%g$aX%h$aX%i$aX%j$aX%k$aX%l$aX%m$aX%n$aX%o$aX%p$aX%q$aX%r$aX%s$aX%t$aX%u$aX%v$aX%w$aX%x$aX%y$aX%|$aX%}$aX&O$aX&Q$aX~O%{$VO&P$WO~O#p$XO~O$X#VO$Y#VO&O#VO~O$^$YO~O#t$ZO~Oq#YO&R$]O~O$_$^O&R$]O~O$_$`O$`$bO~O$_#{O$`$eO~OS$fOT$fOWvaXvaYvaZva[va]va^va_va`vaavabvacva!Vva#tva$Xva$Yva$^va$bva$cva$dva$eva$fva$gva$hva$iva$jva$kva$lva$mva$nva$ova$pva$qva$rva$sva$tva$uva$vva$wva$xva$yva$zva${va$|va$}va%Ova%Pva%Qva%Rva%Sva%Tva%Uva%Vva%Wva%Xva%Yva%Zva%[va%]va%^va%_va%`va%ava%bva%cva%dva%eva%fva%gva%hva%iva%jva%kva%lva%mva%nva%ova%pva%qva%rva%sva%tva%uva%vva%wva%xva%yva%|va%}va&Ova&Qva~Ot!|OUsqfsqgsqhsqzsq{sq|sq}sq!Osq!Psq!Qsq!Rsq$Qsq$Wsq%zsq$`sq$_sq~OVsqwsqxsqysq~PIpOV!|Ow!|Ox!|Oy!|O~PIpOV!|Ot!|Ow!|Ox!|Oy!|Oz!}O{!}OUsqfsqgsqhsq$Qsq$Wsq%zsq$`sq$_sq~O|sq}sq!Osq!Psq!Qsq!Rsq~PKlO|#OO}#OO!O#OO!P#OO!Q#OO!R#OO~PKlOV!|Of#POh#POt!|Ow!|Ox!|Oy!|Oz!}O{!}O|#OO}#OO!O#OO!P#OO!Q#OO!R#OO~OUsqgsq$Qsq$Wsq%zsq$`sq$_sq~PMnO#p$hO%{$gO~O$`$iO~Oq#YO&R$jO~Oq$lO$`$mO~O$_$nO$`$mO~O$_$Ua$`$Ua~P'iO$^#^OWviXviYviZvi[vi]vi^vi_vi`viavibvicvi!Vvi#tvi$Xvi$Yvi$bvi$cvi$dvi$evi$fvi$gvi$hvi$ivi$jvi$kvi$lvi$mvi$nvi$ovi$pvi$qvi$rvi$svi$tvi$uvi$vvi$wvi$xvi$yvi$zvi${vi$|vi$}vi%Ovi%Pvi%Qvi%Rvi%Svi%Tvi%Uvi%Vvi%Wvi%Xvi%Yvi%Zvi%[vi%]vi%^vi%_vi%`vi%avi%bvi%cvi%dvi%evi%fvi%gvi%hvi%ivi%jvi%kvi%lvi%mvi%nvi%ovi%pvi%qvi%rvi%svi%tvi%uvi%vvi%wvi%xvi%yvi%|vi%}vi&Ovi&Qvi~O%{$qO~Oq#YO~Oq$lO$`$rO~Oq$lO~O",goto:"({$bPPPPPPPPPPPPPPPPPPPPPPPPPPPPP$c$o${%RP%[$cP%e%lPPPPPPPPPPP$c%v&SP&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S&S$cP&`$c$cP$c$c&o$c&{'['dPPP$cP'gP'j'p'vPPPPP'|PPP(le^OXY!y#g#h#i#j#k#{eROXY!y#g#h#i#j#k#{Q!zRR#b!{Q#_!xQ$O#dR$p$fQ!{RQ#UUR#b!zZ#f!|!}#O#P#QY#e!|!}#O#P#QR$P#feUOXY!y#g#h#i#j#k#{eTOXY!y#g#h#i#j#k#{d^OXY!y#g#h#i#j#k#{R#q#TeYOXY!y#g#h#i#j#k#{d]OXY!y#g#h#i#j#k#{R#][Q#[ZV$[#v$^$kR#u#YR#r#TQ$a#zR$o$aQ#|#aR$d#|Q#w#[R$_#wQSOQ#WXQ#XYQ#a!yQ$Q#gQ$R#hQ$S#iQ$T#jQ$U#kR$c#{Q#g!|Q#h!}Q#i#OQ#j#PR#k#Q",nodeNames:"\u26A0 Bool Ignoring On GroupLeft GroupRight Offset Atan2 Avg Bottomk Count CountValues Group Max Min Quantile Stddev Stdvar Sum Topk By Without And Or Unless Start End LineComment PromQL AggregateExpr AggregateOp AggregateModifier GroupingLabels LabelName FunctionCallBody BinaryExpr Pow BoolModifier MatchingModifierClause Mul Div Mod Add Sub Eql Gte Gtr Lte Lss Neq FunctionCall FunctionIdentifier AbsentOverTime Identifier Absent Abs Acos Acosh Asin Asinh Atan Atanh AvgOverTime Ceil Changes Clamp ClampMax ClampMin Cos Cosh CountOverTime DaysInMonth DayOfMonth DayOfWeek DayOfYear Deg Delta Deriv Exp Floor HistogramCount HistogramFraction HistogramQuantile HistogramSum HoltWinters Hour Idelta Increase Irate LabelReplace LabelJoin LastOverTime Ln Log10 Log2 MaxOverTime MinOverTime Minute Month Pi PredictLinear PresentOverTime QuantileOverTime Rad Rate Resets Round Scalar Sgn Sin Sinh Sort SortDesc Sqrt StddevOverTime StdvarOverTime SumOverTime Tan Tanh Timestamp Time Vector Year MatrixSelector Duration NumberLiteral OffsetExpr ParenExpr StringLiteral SubqueryExpr UnaryExpr UnaryOp VectorSelector LabelMatchers LabelMatcher MatchOp EqlSingle EqlRegex NeqRegex StepInvariantExpr At AtModifierPreprocessors MetricName",maxTerm:233,nodeProps:[["group",-12,29,35,50,123,125,126,127,128,129,130,132,139,"Expr"]],propSources:[Ci],skippedNodes:[0,27],repeatNodeCount:3,tokenData:"3s~RwX^#lpq#lqr$ars$tst&luv'Twx'Yxy({yz)Qz{)V{|)[|})c}!O)h!O!P)o!P!Q*o!Q!R*t!R![+l![!]0W!^!_1S!_!`1a!`!a1v!b!c2T!c!}2Y!}#O2p#P#Q2u#Q#R2z#R#S2Y#S#T3P#T#o2Y#o#p3i#q#r3n#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~#qY$[~X^#lpq#l#y#z#l$f$g#l#BY#BZ#l$IS$I_#l$I|$JO#l$JT$JU#l$KV$KW#l&FU&FV#l~$dQ!_!`$j#r#s$o~$oO!R~~$tO$O~~$yW#t~OY$tZr$trs%cs#O$t#O#P%h#P;'S$t;'S;=`&f<%lO$t~%hO#t~~%kRO;'S$t;'S;=`%t;=`O$t~%yX#t~OY$tZr$trs%cs#O$t#O#P%h#P;'S$t;'S;=`&f;=`<%l$t<%lO$t~&iP;=`<%l$t~&qSk~OY&lZ;'S&l;'S;=`&}<%lO&l~'QP;=`<%l&l~'YOy~~'_W#t~OY'YZw'Ywx%cx#O'Y#O#P'w#P;'S'Y;'S;=`(u<%lO'Y~'zRO;'S'Y;'S;=`(T;=`O'Y~(YX#t~OY'YZw'Ywx%cx#O'Y#O#P'w#P;'S'Y;'S;=`(u;=`<%l'Y<%lO'Y~(xP;=`<%l'Y~)QO$^~~)VO$`~~)[Ow~R)cO%}PzQ~)hO$_~R)oO%|P{QP)rP!Q![)uP)zR&OP!Q![)u!g!h*T#X#Y*TP*WR{|*a}!O*a!Q![*gP*dP!Q![*gP*lP&OP!Q![*g~*tOx~R*yZ&OP!O!P)u!Q![+l!g!h*T#W#X,a#X#Y*T#[#],x#a#b-^#g#h.Q#k#l.c#l#m/l#m#n.}R+qY&OP!O!P)u!Q![+l!g!h*T#W#X,a#X#Y*T#[#],x#a#b-^#g#h.Q#k#l.c#m#n.}Q,fP#pQ!Q![,iQ,lS!Q![,i#[#],x#a#b-^#g#h.QQ,}P#pQ!Q![-QQ-TR!Q![-Q#a#b-^#g#h.QQ-cQ#pQ!Q![-i#g#h-{Q-lR!Q![-i#a#b-u#g#h.QQ-xP#g#h-{Q.QO#pQQ.VP#pQ!Q![.YQ.]Q!Q![.Y#a#b-uQ.hP#pQ!Q![.kQ.nT!Q![.k#W#X,a#[#],x#a#b-^#g#h.QQ/SP#pQ!Q![/VQ/YU!Q![/V#W#X,a#[#],x#a#b-^#g#h.Q#k#l.cP/oR!Q![/x!c!i/x#T#Z/xP/}R&OP!Q![/x!c!i/x#T#Z/xV0_T&PS!VR!Q![0n![!]0n!c!}0n#R#S0n#T#o0nR0sT!VR!Q![0n![!]0n!c!}0n#R#S0n#T#o0n~1XP!Q~!_!`1[~1aO!P~~1fQ#|P!_!`1l#r#s1qQ1qO|Q~1vO#}~~1{P!O~!_!`2O~2TO}~~2YO$Q~V2aT!VRqS!Q![2Y![!]0n!c!}2Y#R#S2Y#T#o2Y~2uO%z~~2zO%{~~3POt~~3STO#S3P#S#T%c#T;'S3P;'S;=`3c<%lO3P~3fP;=`<%l3P~3nO&Q~~3sO&R~",tokenizers:[0,1,2],topRules:{PromQL:[0,28],MetricName:[1,142]},specialized:[{term:53,get:(t,e)=>Vt(t)<<1,external:Vt},{term:53,get:(t,e)=>Yt(t)<<1|1,external:Yt,extend:!0},{term:53,get:t=>Ei[t]||-1}],tokenPrec:0}),Di=3,Mi=4,Ri=5,Li=9,Ai=11,Vi=15,Yi=19,Ot=22,vt=23,gt=24,Ni=28,yt=29,Re=32,xe=33,Se=34,Oe=35,Ui=36,la=37,Ii=38,Bi=39,zi=40,Fi=41,Gi=42,Zi=43,nt=44,it=45,rt=46,ot=47,st=48,Te=49,ca=50,Wi=52,_t=53,ji=54,Hi=55,Ji=56,Ki=57,er=58,tr=59,ar=60,nr=61,ir=62,rr=63,or=64,sr=65,lr=66,cr=67,ur=68,dr=69,fr=70,pr=71,hr=72,mr=73,Or=74,vr=75,gr=76,yr=77,_r=78,br=79,$r=80,Qr=81,kr=82,Pr=83,xr=84,Sr=85,Tr=86,wr=87,Xr=88,Cr=89,Er=90,qr=91,Dr=92,Mr=93,Rr=94,Lr=95,Ar=96,Vr=97,Yr=98,Nr=99,Ur=100,Ir=101,Br=102,zr=103,Fr=104,Gr=105,Zr=106,Wr=107,jr=108,Hr=109,Jr=110,Kr=111,eo=112,to=113,ao=114,no=115,io=116,ro=117,oo=118,so=119,lo=120,co=121,uo=122,we=123,lt=124,bt=125,Xe=126,ua=127,Ue=128,ge=129,da=130,Ie=132,Le=133,pe=134,ct=135,Be=136,fa=137,pa=138,$t=139;var r;(function(t){t.none="none",t.vector="vector",t.scalar="scalar",t.matrix="matrix",t.string="string"})(r||(r={}));const fo={[Hi]:{name:"abs",argTypes:[r.vector],variadic:0,returnType:r.vector},[ji]:{name:"absent",argTypes:[r.vector],variadic:0,returnType:r.vector},[Wi]:{name:"absent_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Ji]:{name:"acos",argTypes:[r.vector],variadic:0,returnType:r.vector},[Ki]:{name:"acosh",argTypes:[r.vector],variadic:0,returnType:r.vector},[er]:{name:"asin",argTypes:[r.vector],variadic:0,returnType:r.vector},[tr]:{name:"asinh",argTypes:[r.vector],variadic:0,returnType:r.vector},[ar]:{name:"atan",argTypes:[r.vector],variadic:0,returnType:r.vector},[nr]:{name:"atanh",argTypes:[r.vector],variadic:0,returnType:r.vector},[ir]:{name:"avg_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[rr]:{name:"ceil",argTypes:[r.vector],variadic:0,returnType:r.vector},[or]:{name:"changes",argTypes:[r.matrix],variadic:0,returnType:r.vector},[sr]:{name:"clamp",argTypes:[r.vector,r.scalar,r.scalar],variadic:0,returnType:r.vector},[lr]:{name:"clamp_max",argTypes:[r.vector,r.scalar],variadic:0,returnType:r.vector},[cr]:{name:"clamp_min",argTypes:[r.vector,r.scalar],variadic:0,returnType:r.vector},[ur]:{name:"cos",argTypes:[r.vector],variadic:0,returnType:r.vector},[dr]:{name:"Cosh",argTypes:[r.vector],variadic:0,returnType:r.vector},[fr]:{name:"count_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[pr]:{name:"days_in_month",argTypes:[r.vector],variadic:1,returnType:r.vector},[hr]:{name:"day_of_month",argTypes:[r.vector],variadic:1,returnType:r.vector},[mr]:{name:"day_of_week",argTypes:[r.vector],variadic:1,returnType:r.vector},[Or]:{name:"day_of_year",argTypes:[r.vector],variadic:1,returnType:r.vector},[vr]:{name:"deg",argTypes:[r.vector],variadic:0,returnType:r.vector},[gr]:{name:"delta",argTypes:[r.matrix],variadic:0,returnType:r.vector},[yr]:{name:"deriv",argTypes:[r.matrix],variadic:0,returnType:r.vector},[_r]:{name:"exp",argTypes:[r.vector],variadic:0,returnType:r.vector},[br]:{name:"floor",argTypes:[r.vector],variadic:0,returnType:r.vector},[$r]:{name:"histogram_count",argTypes:[r.vector],variadic:0,returnType:r.vector},[Qr]:{name:"histogram_fraction",argTypes:[r.scalar,r.scalar,r.vector],variadic:0,returnType:r.vector},[kr]:{name:"histogram_quantile",argTypes:[r.scalar,r.vector],variadic:0,returnType:r.vector},[Pr]:{name:"histogram_sum",argTypes:[r.vector],variadic:0,returnType:r.vector},[xr]:{name:"holt_winters",argTypes:[r.matrix,r.scalar,r.scalar],variadic:0,returnType:r.vector},[Sr]:{name:"hour",argTypes:[r.vector],variadic:1,returnType:r.vector},[Tr]:{name:"idelta",argTypes:[r.matrix],variadic:0,returnType:r.vector},[wr]:{name:"increase",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Xr]:{name:"irate",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Cr]:{name:"label_replace",argTypes:[r.vector,r.string,r.string,r.string,r.string],variadic:0,returnType:r.vector},[Er]:{name:"label_join",argTypes:[r.vector,r.string,r.string,r.string],variadic:-1,returnType:r.vector},[qr]:{name:"last_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Dr]:{name:"ln",argTypes:[r.vector],variadic:0,returnType:r.vector},[Mr]:{name:"log10",argTypes:[r.vector],variadic:0,returnType:r.vector},[Rr]:{name:"log2",argTypes:[r.vector],variadic:0,returnType:r.vector},[Lr]:{name:"max_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Ar]:{name:"min_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Vr]:{name:"minute",argTypes:[r.vector],variadic:1,returnType:r.vector},[Yr]:{name:"month",argTypes:[r.vector],variadic:1,returnType:r.vector},[Nr]:{name:"pi",argTypes:[],variadic:0,returnType:r.vector},[Ur]:{name:"predict_linear",argTypes:[r.matrix,r.scalar],variadic:0,returnType:r.vector},[Ir]:{name:"present_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Br]:{name:"quantile_over_time",argTypes:[r.scalar,r.matrix],variadic:0,returnType:r.vector},[zr]:{name:"rad",argTypes:[r.vector],variadic:0,returnType:r.vector},[Fr]:{name:"rate",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Gr]:{name:"resets",argTypes:[r.matrix],variadic:0,returnType:r.vector},[Zr]:{name:"round",argTypes:[r.vector,r.scalar],variadic:1,returnType:r.vector},[Wr]:{name:"scalar",argTypes:[r.vector],variadic:0,returnType:r.scalar},[jr]:{name:"sgn",argTypes:[r.vector],variadic:0,returnType:r.vector},[Hr]:{name:"sin",argTypes:[r.vector],variadic:0,returnType:r.vector},[Jr]:{name:"Sinh",argTypes:[r.vector],variadic:0,returnType:r.vector},[Kr]:{name:"sort",argTypes:[r.vector],variadic:0,returnType:r.vector},[eo]:{name:"sort_desc",argTypes:[r.vector],variadic:0,returnType:r.vector},[to]:{name:"sqrt",argTypes:[r.vector],variadic:0,returnType:r.vector},[ao]:{name:"stddev_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[no]:{name:"stdvar_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[io]:{name:"sum_over_time",argTypes:[r.matrix],variadic:0,returnType:r.vector},[ro]:{name:"tan",argTypes:[r.vector],variadic:0,returnType:r.vector},[oo]:{name:"tanh",argTypes:[r.vector],variadic:0,returnType:r.vector},[lo]:{name:"time",argTypes:[],variadic:0,returnType:r.scalar},[so]:{name:"timestamp",argTypes:[r.vector],variadic:0,returnType:r.vector},[co]:{name:"vector",argTypes:[r.scalar],variadic:0,returnType:r.vector},[uo]:{name:"year",argTypes:[r.vector],variadic:1,returnType:r.vector}};function ha(t){return fo[t]}class ma{constructor(e,a,n){this.type=e,this.name=a,this.value=n}matchesEmpty(){switch(this.type){case Be:return this.value==="";case Te:return this.value!=="";default:return!1}}}var B;(function(t){t.CardOneToOne="one-to-one",t.CardManyToOne="many-to-one",t.CardOneToMany="one-to-many",t.CardManyToMany="many-to-many"})(B||(B={}));function po(t,e){const a=new ma(0,"",""),n=t.cursor();if(!n.next())return a;do switch(n.type.id){case xe:a.name=e.sliceDoc(n.from,n.to);break;case ct:const i=n.node.firstChild;i&&(a.type=i.type.id);break;case Ue:a.value=e.sliceDoc(n.from,n.to).slice(1,-1);break}while(n.nextSibling());return a}function Oa(t,e){const a=[];return t.forEach(n=>{a.push(po(n,e))}),a}function ho(t,e,a){if(!e||e.length===0)return t;let n="";for(const i of e){if(i.name===a||i.value==="")continue;let s="";switch(i.type){case Be:s="=";break;case Te:s="!=";break;case pa:s="!~";break;case fa:s="=~";break;default:s="="}const o=`${i.name}${s}"${i.value}"`;n===""?n=o:n=`${n},${o}`}return`${t}{${n}}`}function va(t,e){for(;;){if(!t||t.type.id===e)return t;t=t.parent}return null}function J(t,...e){const a=t.cursor();if(!a.next())return!1;let n=!1;do n=e.some(i=>a.type.id===i||a.type.name===i);while(!n&&a.nextSibling());return n}function Nt(t,...e){const a=t.cursor();if(!a.next())return!1;let n=0;do a.type.is(e[n])&&n++;while(n<e.length&&a.nextSibling());return n>=e.length}function ie(t){var e;if(!t)return r.none;switch(t.type.id){case yt:return r.vector;case Ie:return r.vector;case Xe:return ie(t.firstChild);case Ue:return r.string;case bt:return r.scalar;case we:return r.matrix;case ge:return r.matrix;case ua:return ie(t.getChild("Expr"));case da:return ie(t.getChild("Expr"));case Oe:const a=ie(t.firstChild),n=ie(t.lastChild);return a===r.scalar&&n===r.scalar?r.scalar:r.vector;case ca:const i=(e=t.firstChild)===null||e===void 0?void 0:e.firstChild;return i?ha(i.type.id).returnType:r.none;case $t:return ie(t.getChild("Expr"));default:return r.none}}function mo(t,e){if(!e||e.type.id!==Oe)return null;const a={card:B.CardOneToOne,matchingLabels:[],on:!1,include:[]},n=e.getChild(Ii);if(n){a.on=n.getChild(Di)!==null;const s=n.getChild(Re),o=s?s.getChildren(xe):[];for(const c of o)a.matchingLabels.push(t.sliceDoc(c.from,c.to));const u=n.getChild(Mi),d=n.getChild(Ri),l=u||d;if(l){a.card=u?B.CardManyToOne:B.CardOneToMany;const c=l.nextSibling,b=(c==null?void 0:c.getChildren(xe))||[];for(const v of b)a.include.push(t.sliceDoc(v.from,v.to))}}return J(e,Ot,vt,gt)&&a.card===B.CardOneToOne&&(a.card=B.CardManyToMany),a}class Oo{constructor(e){this.tree=dt(e),this.state=e,this.diagnostics=[]}getDiagnostics(){return this.diagnostics.sort((e,a)=>e.from-a.from)}analyze(){this.checkAST(this.tree.topNode.firstChild),this.diagnoseAllErrorNodes()}diagnoseAllErrorNodes(){const e=this.tree.cursor();for(;e.next();)if(e.type.id===0&&e.to!==this.tree.topNode.to){const a=e.node.parent;this.diagnostics.push({severity:"error",message:"unexpected expression",from:a?a.from:e.from,to:a?a.to:e.to})}}checkAST(e){if(!e)return r.none;switch(e.type.id){case yt:this.checkAggregationExpr(e);break;case Oe:this.checkBinaryExpr(e);break;case ca:this.checkCallFunction(e);break;case ua:this.checkAST(e.getChild("Expr"));break;case da:const a=this.checkAST(e.getChild("Expr"));a!==r.scalar&&a!==r.vector&&this.addDiagnostic(e,`unary expression only allowed on expressions of type scalar or instant vector, got ${a}`);break;case ge:const n=this.checkAST(e.getChild("Expr"));n!==r.vector&&this.addDiagnostic(e,`subquery is only allowed on instant vector, got ${n} in ${e.name} instead`);break;case we:this.checkAST(e.getChild("Expr"));break;case Ie:this.checkVectorSelector(e);break;case $t:const i=this.checkAST(e.getChild("Expr"));i!==r.vector&&i!==r.matrix&&this.addDiagnostic(e,"@ modifier must be preceded by an instant selector vector or range vector selector or a subquery");break}return ie(e)}checkAggregationExpr(e){var a;const n=(a=e.firstChild)===null||a===void 0?void 0:a.firstChild;if(!n){this.addDiagnostic(e,"aggregation operator expected in aggregation expression but got nothing");return}const i=e.getChild(Se),s=i?i.getChildren("Expr"):[];if(!s.length){this.addDiagnostic(e,"unable to find the parameter for the expression");return}this.expectType(s[s.length-1],r.vector,"aggregation expression"),(n.type.id===Yi||n.type.id===Li||n.type.id===Vi)&&this.expectType(s[0],r.scalar,"aggregation parameter"),n.type.id===Ai&&this.expectType(s[0],r.string,"aggregation parameter")}checkBinaryExpr(e){const a=e.firstChild,n=e.lastChild;if(!a||!n){this.addDiagnostic(e,"left or right expression is missing in binary expression");return}const i=this.checkAST(a),s=this.checkAST(n),o=e.getChild(la),u=J(e,nt,Te,ot,st,it,rt),d=J(e,Ot,vt,gt);o?u||this.addDiagnostic(e,"bool modifier can only be used on comparison operators"):u&&i===r.scalar&&s===r.scalar&&this.addDiagnostic(e,"comparisons between scalars must use BOOL modifier");const l=mo(this.state,e);if(l!==null&&l.on)for(const c of l.matchingLabels)for(const b of l.include)c===b&&this.addDiagnostic(e,`label "${c}" must not occur in ON and GROUP clause at once`);i!==r.scalar&&i!==r.vector&&this.addDiagnostic(a,"binary expression must contain only scalar and instant vector types"),s!==r.scalar&&s!==r.vector&&this.addDiagnostic(n,"binary expression must contain only scalar and instant vector types"),(i!==r.vector||s!==r.vector)&&l!==null?l.matchingLabels.length>0&&this.addDiagnostic(e,"vector matching only allowed between instant vectors"):d&&(((l==null?void 0:l.card)===B.CardOneToMany||(l==null?void 0:l.card)===B.CardManyToOne)&&this.addDiagnostic(e,"no grouping allowed for set operations"),(l==null?void 0:l.card)!==B.CardManyToMany&&this.addDiagnostic(e,"set operations must always be many-to-many")),(i===r.scalar||s===r.scalar)&&d&&this.addDiagnostic(e,"set operator not allowed in binary scalar expression")}checkCallFunction(e){var a;const n=(a=e.firstChild)===null||a===void 0?void 0:a.firstChild;if(!n){this.addDiagnostic(e,"function not defined");return}const i=e.getChild(Se),s=i?i.getChildren("Expr"):[],o=ha(n.type.id),u=o.argTypes.length;if(o.variadic===0)s.length!==u&&this.addDiagnostic(e,`expected ${u} argument(s) in call to "${o.name}", got ${s.length}`);else{const l=u-1;if(l>s.length)this.addDiagnostic(e,`expected at least ${l} argument(s) in call to "${o.name}", got ${s.length}`);else{const c=l+o.variadic;o.variadic>0&&c<s.length&&this.addDiagnostic(e,`expected at most ${c} argument(s) in call to "${o.name}", got ${s.length}`)}}let d=0;for(let l=0;l<s.length;l++){if(d=l,d>=o.argTypes.length){if(o.variadic===0)break;d=o.argTypes.length-1}this.expectType(s[l],o.argTypes[d],`call to function "${o.name}"`)}}checkVectorSelector(e){const a=e.getChild(Le),n=Oa(a?a.getChildren(pe):[],this.state);let i="";const s=e.getChild(_t);if(s&&(i=this.state.sliceDoc(s.from,s.to)),i!==""){const u=n.find(d=>d.name==="__name__");u&&this.addDiagnostic(e,`metric name must not be set twice: ${i} or ${u.value}`),n.push(new ma(Be,"__name__",i))}n.every(u=>u.matchesEmpty())&&this.addDiagnostic(e,"vector selector must contain at least one non-empty matcher")}expectType(e,a,n){const i=this.checkAST(e);i!==a&&this.addDiagnostic(e,`expected type ${a} in ${n}, got ${i}`)}addDiagnostic(e,a){this.diagnostics.push({severity:"error",message:a,from:e.from,to:e.to})}}const vo=[{label:"y"},{label:"w"},{label:"d"},{label:"h"},{label:"m"},{label:"s"},{label:"ms"}],go=[{label:"="},{label:"!="},{label:"=~"},{label:"!~"}],ga=[{label:"^"},{label:"*"},{label:"/"},{label:"%"},{label:"+"},{label:"-"},{label:"=="},{label:">="},{label:">"},{label:"<"},{label:"<="},{label:"!="},{label:"atan2"},{label:"and"},{label:"or"},{label:"unless"}],yo=[{label:"on",info:"Match only on specified labels",type:"keyword"},{label:"ignoring",info:"Ignore specified labels for matching",type:"keyword"},{label:"group_left",info:"Allow many-to-one matching",type:"keyword"},{label:"group_right",info:"Allow one-to-many matching",type:"keyword"}],_o=[{label:"start()",info:"resolve to the start of the query",type:"keyword"},{label:"end()",info:"resolve to the end of the query",type:"keyword"}],bo=[{label:"abs",detail:"function",info:"Return absolute values of input series",type:"function"},{label:"absent",detail:"function",info:"Determine whether input vector is empty",type:"function"},{label:"absent_over_time",detail:"function",info:"Determine whether input range vector is empty",type:"function"},{label:"acos",detail:"function",info:"Calculate the arccosine, in radians, for input series",type:"function"},{label:"acosh",detail:"function",info:"Calculate the inverse hyperbolic cosine, in radians, for input series",type:"function"},{label:"asin",detail:"function",info:"Calculate the arcsine, in radians, for input series",type:"function"},{label:"asinh",detail:"function",info:"Calculate the inverse hyperbolic sine, in radians, for input series",type:"function"},{label:"atan",detail:"function",info:"Calculate the arctangent, in radians, for input series",type:"function"},{label:"atanh",detail:"function",info:"Calculate the inverse hyperbolic tangent, in radians, for input series",type:"function"},{label:"avg_over_time",detail:"function",info:"Average series values over time",type:"function"},{label:"ceil",detail:"function",info:"Round up values of input series to nearest integer",type:"function"},{label:"changes",detail:"function",info:"Return number of value changes in input series over time",type:"function"},{label:"clamp",detail:"function",info:"Limit the value of input series between a minimum and a maximum",type:"function"},{label:"clamp_max",detail:"function",info:"Limit the value of input series to a maximum",type:"function"},{label:"clamp_min",detail:"function",info:"Limit the value of input series to a minimum",type:"function"},{label:"cos",detail:"function",info:"Calculate the cosine, in radians, for input series",type:"function",boost:-1},{label:"cosh",detail:"function",info:"Calculate the hyperbolic cosine, in radians, for input series",type:"function",boost:-1},{label:"count_over_time",detail:"function",info:"Count the number of values for each input series",type:"function"},{label:"days_in_month",detail:"function",info:"Return the number of days in current month for provided timestamps",type:"function"},{label:"day_of_month",detail:"function",info:"Return the day of the month for provided timestamps",type:"function"},{label:"day_of_week",detail:"function",info:"Return the day of the week for provided timestamps",type:"function"},{label:"day_of_year",detail:"function",info:"Return the day of the year for provided timestamps",type:"function"},{label:"deg",detail:"function",info:"Convert radians to degrees for input series",type:"function",boost:-1},{label:"delta",detail:"function",info:"Calculate the difference between beginning and end of a range vector (for gauges)",type:"function"},{label:"deriv",detail:"function",info:"Calculate the per-second derivative over series in a range vector (for gauges)",type:"function"},{label:"exp",detail:"function",info:"Calculate exponential function for input vector values",type:"function"},{label:"floor",detail:"function",info:"Round down values of input series to nearest integer",type:"function"},{label:"histogram_count",detail:"function",info:"Return the count of observations from a native histogram (experimental feature)",type:"function"},{label:"histogram_fraction",detail:"function",info:"Calculate fractions of observations within an interval from a native histogram (experimental feature)",type:"function"},{label:"histogram_quantile",detail:"function",info:"Calculate quantiles from native histograms (experimental) and from conventional histogram buckets",type:"function"},{label:"histogram_sum",detail:"function",info:"Return the sum of observations from a native histogram (experimental feature)",type:"function"},{label:"holt_winters",detail:"function",info:"Calculate smoothed value of input series",type:"function"},{label:"hour",detail:"function",info:"Return the hour of the day for provided timestamps",type:"function"},{label:"idelta",detail:"function",info:"Calculate the difference between the last two samples of a range vector (for counters)",type:"function"},{label:"increase",detail:"function",info:"Calculate the increase in value over a range of time (for counters)",type:"function"},{label:"irate",detail:"function",info:"Calculate the per-second increase over the last two samples of a range vector (for counters)",type:"function"},{label:"label_replace",detail:"function",info:"Set or replace label values",type:"function"},{label:"label_join",detail:"function",info:"Join together label values into new label",type:"function"},{label:"last_over_time",detail:"function",info:"The most recent point value in specified interval.",type:"function"},{label:"ln",detail:"function",info:"Calculate natural logarithm of input series",type:"function"},{label:"log10",detail:"function",info:"Calulcate base-10 logarithm of input series",type:"function"},{label:"log2",detail:"function",info:"Calculate base-2 logarithm of input series",type:"function"},{label:"max_over_time",detail:"function",info:"Return the maximum value over time for input series",type:"function"},{label:"min_over_time",detail:"function",info:"Return the minimum value over time for input series",type:"function"},{label:"minute",detail:"function",info:"Return the minute of the hour for provided timestamps",type:"function"},{label:"month",detail:"function",info:"Return the month for provided timestamps",type:"function"},{label:"pi",detail:"function",info:"Return pi",type:"function"},{label:"predict_linear",detail:"function",info:"Predict the value of a gauge into the future",type:"function"},{label:"present_over_time",detail:"function",info:"the value 1 for any series in the specified interval",type:"function"},{label:"quantile_over_time",detail:"function",info:"Calculate value quantiles over time for input series",type:"function"},{label:"rad",detail:"function",info:"Convert degrees to radians for input series",type:"function",boost:-1},{label:"rate",detail:"function",info:"Calculate per-second increase over a range vector (for counters)",type:"function"},{label:"resets",detail:"function",info:"Return number of value decreases (resets) in input series of time",type:"function"},{label:"round",detail:"function",info:"Round values of input series to nearest integer",type:"function"},{label:"scalar",detail:"function",info:"Convert single-element series vector into scalar value",type:"function"},{label:"sgn",detail:"function",info:"Returns the sign of the instant vector",type:"function"},{label:"sin",detail:"function",info:"Calculate the sine, in radians, for input series",type:"function"},{label:"sinh",detail:"function",info:"Calculate the hyperbolic sine, in radians, for input series",type:"function"},{label:"sort",detail:"function",info:"Sort input series ascendingly by value",type:"function"},{label:"sort_desc",detail:"function",info:"Sort input series descendingly by value",type:"function"},{label:"sqrt",detail:"function",info:"Return the square root for input series",type:"function"},{label:"stddev_over_time",detail:"function",info:"Calculate the standard deviation within input series over time",type:"function"},{label:"stdvar_over_time",detail:"function",info:"Calculate the standard variation within input series over time",type:"function"},{label:"sum_over_time",detail:"function",info:"Calculate the sum over the values of input series over time",type:"function"},{label:"tan",detail:"function",info:"Calculate the tangent, in radians, for input series",type:"function"},{label:"tanh",detail:"function",info:"Calculate the hyperbolic tangent, in radians, for input series",type:"function"},{label:"time",detail:"function",info:"Return the Unix timestamp at the current evaluation time",type:"function"},{label:"timestamp",detail:"function",info:"Return the Unix timestamp for the samples in the input vector",type:"function"},{label:"vector",detail:"function",info:"Convert a scalar value into a single-element series vector",type:"function"},{label:"year",detail:"function",info:"Return the year for provided timestamps",type:"function"}],ya=[{label:"avg",detail:"aggregation",info:"Calculate the average over dimensions",type:"keyword"},{label:"bottomk",detail:"aggregation",info:"Smallest k elements by sample value",type:"keyword"},{label:"count",detail:"aggregation",info:"Count number of elements in the vector",type:"keyword"},{label:"count_values",detail:"aggregation",info:"Count number of elements with the same value",type:"keyword"},{label:"group",detail:"aggregation",info:"Group series, while setting the sample value to 1",type:"keyword"},{label:"max",detail:"aggregation",info:"Select maximum over dimensions",type:"keyword"},{label:"min",detail:"aggregation",info:"Select minimum over dimensions",type:"keyword"},{label:"quantile",detail:"aggregation",info:"Calculate \u03C6-quantile (0 \u2264 \u03C6 \u2264 1) over dimensions",type:"keyword"},{label:"stddev",detail:"aggregation",info:"Calculate population standard deviation over dimensions",type:"keyword"},{label:"stdvar",detail:"aggregation",info:"Calculate population standard variance over dimensions",type:"keyword"},{label:"sum",detail:"aggregation",info:"Calculate sum over dimensions",type:"keyword"},{label:"topk",detail:"aggregation",info:"Largest k elements by sample value",type:"keyword"}],$o=[{label:"by",info:"Keep the listed labels, remove all others.",type:"keyword"},{label:"without",info:"Remove the listed labels, preserve all others.",type:"keyword"}],Qo=[{label:"nan",info:"Floating-point NaN value",type:"constant"},{label:"inf",info:"Floating-point infinity",type:"constant"}],ko=[{label:"sum(rate(__input_vector__[5m]))",type:"function",detail:"snippet",info:"Sum over rates of increase",apply:ce("sum(rate(${__input_vector__}[5m]))")},{label:"histogram_quantile(__quantile__, sum by(le) (rate(__histogram_metric__[5m])))",type:"function",detail:"snippet",info:"Approximate a quantile value from an aggregated histogram",apply:ce("histogram_quantile(${__quantile__}, sum by(le) (rate(${__histogram_metric__}[5m])))")},{label:'label_replace(__input_vector__, "__dst__", "__replacement__", "__src__", "__regex__")',type:"function",detail:"snippet",info:"Set or replace a label value in an input vector",apply:ce('label_replace(${__input_vector__}, "${__dst__}", "${__replacement__}", "${__src__}", "${__regex__}")')},{label:"topk(__rank_number__, __input_vector__)",type:"function",detail:"snippet",info:"Largest k elements by sample value",apply:ce("topk(${__rank_number__}, ${__input_vector__})")},{label:"bottomk(__rank_number__, __input_vector__)",type:"function",detail:"snippet",info:"Smallest k elements by sample value",apply:ce("bottomk(${__rank_number__}, ${__input_vector__})")},{label:'count_values("__label_name__", __input_vector__)',type:"function",detail:"snippet",info:"Count the number of series per distinct sample value",apply:ce('count_values("${__label_name__}", ${__metric__})')}],Z={matchOp:go,binOp:ga,duration:vo,binOpModifier:yo,atModifier:_o,functionIdentifier:bo,aggregateOp:ya,aggregateOpModifier:$o,number:Qo};var p;(function(t){t[t.MetricName=0]="MetricName",t[t.LabelName=1]="LabelName",t[t.LabelValue=2]="LabelValue",t[t.Function=3]="Function",t[t.Aggregation=4]="Aggregation",t[t.BinOpModifier=5]="BinOpModifier",t[t.BinOp=6]="BinOp",t[t.MatchOp=7]="MatchOp",t[t.AggregateOpModifier=8]="AggregateOpModifier",t[t.Duration=9]="Duration",t[t.Offset=10]="Offset",t[t.Bool=11]="Bool",t[t.AtModifiers=12]="AtModifiers",t[t.Number=13]="Number"})(p||(p={}));function De(t,e){let a=va(t,Ie);return!a||(a=a.getChild(_t),!a)?"":e.sliceDoc(a.from,a.to)}function Po(t,e,a,n=!1,i=!0){const s=t;return n&&s.push(...ko),{from:e,to:a,options:s,validFor:i?/^[a-zA-Z0-9_:]+$/:void 0}}function xo(t,e){let a=t.from+1;return t.firstChild!==null&&(a=e),a}function So(t,e){var a,n,i,s,o,u;let d=t.from;return t.type.id===Le||t.type.id===Re?d=xo(t,e):t.type.id===Se||t.type.id===Ue&&((a=t.parent)===null||a===void 0?void 0:a.type.id)===pe?d++:(t.type.id===Xe||t.type.id===bt&&((n=t.parent)===null||n===void 0?void 0:n.type.id)===0&&((i=t.parent.parent)===null||i===void 0?void 0:i.type.id)===ge||t.type.id===0&&(((s=t.parent)===null||s===void 0?void 0:s.type.id)===Xe||((o=t.parent)===null||o===void 0?void 0:o.type.id)===we||((u=t.parent)===null||u===void 0?void 0:u.type.id)===ge&&J(t.parent,lt)))&&(d=e),d}function To(t,e){var a,n,i,s,o,u,d,l,c,b,v,k,q,S;const m=[];switch(e.type.id){case 0:if(((a=e.parent)===null||a===void 0?void 0:a.type.id)===Xe){m.push({kind:p.Duration});break}if(((n=e.parent)===null||n===void 0?void 0:n.type.id)===pe){m.push({kind:p.MatchOp});break}if(((i=e.parent)===null||i===void 0?void 0:i.type.id)===we){m.push({kind:p.Duration});break}if(((s=e.parent)===null||s===void 0?void 0:s.type.id)===ge&&J(e.parent,lt)){m.push({kind:p.Duration});break}const E=t.sliceDoc(e.from,e.to);ga.filter(T=>T.label.includes(E)).length>0&&m.push({kind:p.BinOp});break;case _t:if(((o=e.parent)===null||o===void 0?void 0:o.type.id)===0){const T=e.parent.parent;if((T==null?void 0:T.type.id)===$t){m.push({kind:p.AtModifiers});break}if((T==null?void 0:T.type.id)===yt){m.push({kind:p.AggregateOpModifier},{kind:p.BinOp});break}if((T==null?void 0:T.type.id)===Ie){const z=De(e,t);ya.filter(N=>N.label===z).length>0&&m.push({kind:p.AggregateOpModifier}),m.push({kind:p.BinOp},{kind:p.Offset});break}if(T&&Nt(T,"Expr")){m.push({kind:p.BinOp},{kind:p.Offset});break}}const C=(u=e.parent)===null||u===void 0?void 0:u.parent;if(!C){m.push({kind:p.MetricName,metricName:t.sliceDoc(e.from,e.to)});break}Nt(C,"Expr","Expr")?C.type.id===Oe&&!J(C,0)&&(m.push({kind:p.MetricName,metricName:t.sliceDoc(e.from,e.to)},{kind:p.Function},{kind:p.Aggregation},{kind:p.BinOpModifier},{kind:p.Number}),J(C,nt,it,rt,ot,st,Te)&&!J(C,la)&&m.push({kind:p.Bool})):(m.push({kind:p.MetricName,metricName:t.sliceDoc(e.from,e.to)},{kind:p.Function},{kind:p.Aggregation}),C.type.id!==Se&&C.type.id!==we&&m.push({kind:p.Number}));break;case Ni:e.firstChild!==null&&e.firstChild.type.id===0&&m.push({kind:p.MetricName,metricName:""},{kind:p.Function},{kind:p.Aggregation},{kind:p.Number});break;case Re:m.push({kind:p.LabelName});break;case Le:m.push({kind:p.LabelName,metricName:De(e,t)});break;case xe:((d=e.parent)===null||d===void 0?void 0:d.type.id)===Re?m.push({kind:p.LabelName}):((l=e.parent)===null||l===void 0?void 0:l.type.id)===pe&&m.push({kind:p.LabelName,metricName:De(e,t)});break;case Ue:if(((c=e.parent)===null||c===void 0?void 0:c.type.id)===pe){let T="";((b=e.parent.firstChild)===null||b===void 0?void 0:b.type.id)===xe&&(T=t.sliceDoc(e.parent.firstChild.from,e.parent.firstChild.to));const z=De(e,t),N=va(e,Le),U=Oa(N?N.getChildren(pe):[],t);m.push({kind:p.LabelValue,metricName:z,labelName:T,matchers:U})}break;case bt:((v=e.parent)===null||v===void 0?void 0:v.type.id)===0&&((k=e.parent.parent)===null||k===void 0?void 0:k.type.id)===ge?m.push({kind:p.Duration}):m.push({kind:p.Number});break;case lt:case Xe:m.push({kind:p.Duration});break;case Se:m.push({kind:p.MetricName,metricName:""},{kind:p.Function},{kind:p.Aggregation});break;case Te:((q=e.parent)===null||q===void 0?void 0:q.type.id)===ct?m.push({kind:p.MatchOp}):((S=e.parent)===null||S===void 0?void 0:S.type.id)===Oe&&m.push({kind:p.BinOp});break;case Be:case fa:case pa:case ct:m.push({kind:p.MatchOp});break;case Ui:case Bi:case zi:case Fi:case Gi:case Zi:case nt:case it:case rt:case ot:case st:case Ot:case gt:case vt:case Oe:m.push({kind:p.BinOp});break}return m}class Ze{constructor(e,a=1e4){this.prometheusClient=e,this.maxMetricsMetadata=a}getPrometheusClient(){return this.prometheusClient}promQL(e){const{state:a,pos:n}=e,i=dt(a).resolve(n,-1),s=To(a,i);let o=Promise.resolve([]),u=!1,d=!0;for(const l of s)switch(l.kind){case p.Aggregation:u=!0,o=o.then(c=>c.concat(Z.aggregateOp));break;case p.Function:u=!0,o=o.then(c=>c.concat(Z.functionIdentifier));break;case p.BinOpModifier:o=o.then(c=>c.concat(Z.binOpModifier));break;case p.BinOp:o=o.then(c=>c.concat(Z.binOp));break;case p.MatchOp:o=o.then(c=>c.concat(Z.matchOp));break;case p.AggregateOpModifier:o=o.then(c=>c.concat(Z.aggregateOpModifier));break;case p.Duration:d=!1,o=o.then(c=>c.concat(Z.duration));break;case p.Offset:o=o.then(c=>c.concat([{label:"offset"}]));break;case p.Bool:o=o.then(c=>c.concat([{label:"bool"}]));break;case p.AtModifiers:o=o.then(c=>c.concat(Z.atModifier));break;case p.Number:o=o.then(c=>c.concat(Z.number));break;case p.MetricName:o=o.then(c=>this.autocompleteMetricName(c,l));break;case p.LabelName:o=o.then(c=>this.autocompleteLabelName(c,l));break;case p.LabelValue:o=o.then(c=>this.autocompleteLabelValue(c,l))}return o.then(l=>Po(l,So(i,n),n,u,d))}autocompleteMetricName(e,a){if(!this.prometheusClient)return e;const n=new Map;return this.prometheusClient.metricNames(a.metricName).then(i=>{var s;for(const o of i)n.set(o,{label:o,type:"constant"});if(i.length<=this.maxMetricsMetadata)return(s=this.prometheusClient)===null||s===void 0?void 0:s.metricMetadata()}).then(i=>{if(i)for(const[s,o]of n){const u=i[s.replace(/(_count|_sum|_bucket)$/,"")];if(u){if(u.length>1)for(const d of u)o.detail===""?o.detail=d.type:o.detail!==d.type&&(o.detail="unknown",o.info="multiple different definitions for this metric"),o.info===""?o.info=d.help:o.info!==d.help&&(o.info="multiple different definitions for this metric");else if(u.length===1){let{type:d,help:l}=u[0];(d==="histogram"||d==="summary")&&(s.endsWith("_count")&&(d="counter",l=`The total number of observations for: ${l}`),s.endsWith("_sum")&&(d="counter",l=`The total sum of observations for: ${l}`),s.endsWith("_bucket")&&(d="counter",l=`The total count of observations for a bucket in the histogram: ${l}`)),o.detail=d,o.info=l}}}return e.concat(Array.from(n.values()))})}autocompleteLabelName(e,a){return this.prometheusClient?this.prometheusClient.labelNames(a.metricName).then(n=>e.concat(n.map(i=>({label:i,type:"constant"})))):e}autocompleteLabelValue(e,a){return!this.prometheusClient||!a.labelName?e:this.prometheusClient.labelValues(a.labelName,a.metricName,a.matchers).then(n=>e.concat(n.map(i=>({label:i,type:"text"}))))}}var We,Ut;function wo(){return Ut||(Ut=1,We=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),We}var Xo=Q;Q.Node=le;Q.create=Q;function Q(t){var e=this;if(e instanceof Q||(e=new Q),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var a=0,n=arguments.length;a<n;a++)e.push(arguments[a]);return e}Q.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,a=t.prev;return e&&(e.prev=a),a&&(a.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=a),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Q.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Q.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Q.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)Eo(this,arguments[t]);return this.length};Q.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)qo(this,arguments[t]);return this.length};Q.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Q.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Q.prototype.forEach=function(t,e){e=e||this;for(var a=this.head,n=0;a!==null;n++)t.call(e,a.value,n,this),a=a.next};Q.prototype.forEachReverse=function(t,e){e=e||this;for(var a=this.tail,n=this.length-1;a!==null;n--)t.call(e,a.value,n,this),a=a.prev};Q.prototype.get=function(t){for(var e=0,a=this.head;a!==null&&e<t;e++)a=a.next;if(e===t&&a!==null)return a.value};Q.prototype.getReverse=function(t){for(var e=0,a=this.tail;a!==null&&e<t;e++)a=a.prev;if(e===t&&a!==null)return a.value};Q.prototype.map=function(t,e){e=e||this;for(var a=new Q,n=this.head;n!==null;)a.push(t.call(e,n.value,this)),n=n.next;return a};Q.prototype.mapReverse=function(t,e){e=e||this;for(var a=new Q,n=this.tail;n!==null;)a.push(t.call(e,n.value,this)),n=n.prev;return a};Q.prototype.reduce=function(t,e){var a,n=this.head;if(arguments.length>1)a=e;else if(this.head)n=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)a=t(a,n.value,i),n=n.next;return a};Q.prototype.reduceReverse=function(t,e){var a,n=this.tail;if(arguments.length>1)a=e;else if(this.tail)n=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)a=t(a,n.value,i),n=n.prev;return a};Q.prototype.toArray=function(){for(var t=new Array(this.length),e=0,a=this.head;a!==null;e++)t[e]=a.value,a=a.next;return t};Q.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,a=this.tail;a!==null;e++)t[e]=a.value,a=a.prev;return t};Q.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var a=new Q;if(e<t||e<0)return a;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)a.push(i.value);return a};Q.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var a=new Q;if(e<t||e<0)return a;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)a.push(i.value);return a};Q.prototype.splice=function(t,e,...a){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var s=[],n=0;i&&n<e;n++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<a.length;n++)i=Co(this,i,a[n]);return s};Q.prototype.reverse=function(){for(var t=this.head,e=this.tail,a=t;a!==null;a=a.prev){var n=a.prev;a.prev=a.next,a.next=n}return this.head=e,this.tail=t,this};function Co(t,e,a){var n=e===t.head?new le(a,null,e,t):new le(a,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function Eo(t,e){t.tail=new le(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function qo(t,e){t.head=new le(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function le(t,e,a,n){if(!(this instanceof le))return new le(t,e,a,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{wo()(Q)}catch{}const Do=Xo,re=Symbol("max"),j=Symbol("length"),ue=Symbol("lengthCalculator"),ke=Symbol("allowStale"),oe=Symbol("maxAge"),W=Symbol("dispose"),It=Symbol("noDisposeOnSet"),M=Symbol("lruList"),I=Symbol("cache"),_a=Symbol("updateAgeOnGet"),je=()=>1;class Mo{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[re]=e.max||1/0;const a=e.length||je;if(this[ue]=typeof a!="function"?je:a,this[ke]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[oe]=e.maxAge||0,this[W]=e.dispose,this[It]=e.noDisposeOnSet||!1,this[_a]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[re]=e||1/0,Qe(this)}get max(){return this[re]}set allowStale(e){this[ke]=!!e}get allowStale(){return this[ke]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[oe]=e,Qe(this)}get maxAge(){return this[oe]}set lengthCalculator(e){typeof e!="function"&&(e=je),e!==this[ue]&&(this[ue]=e,this[j]=0,this[M].forEach(a=>{a.length=this[ue](a.value,a.key),this[j]+=a.length})),Qe(this)}get lengthCalculator(){return this[ue]}get length(){return this[j]}get itemCount(){return this[M].length}rforEach(e,a){a=a||this;for(let n=this[M].tail;n!==null;){const i=n.prev;Bt(this,e,n,a),n=i}}forEach(e,a){a=a||this;for(let n=this[M].head;n!==null;){const i=n.next;Bt(this,e,n,a),n=i}}keys(){return this[M].toArray().map(e=>e.key)}values(){return this[M].toArray().map(e=>e.value)}reset(){this[W]&&this[M]&&this[M].length&&this[M].forEach(e=>this[W](e.key,e.value)),this[I]=new Map,this[M]=new Do,this[j]=0}dump(){return this[M].map(e=>Ae(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[M]}set(e,a,n){if(n=n||this[oe],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const i=n?Date.now():0,s=this[ue](a,e);if(this[I].has(e)){if(s>this[re])return ve(this,this[I].get(e)),!1;const d=this[I].get(e).value;return this[W]&&(this[It]||this[W](e,d.value)),d.now=i,d.maxAge=n,d.value=a,this[j]+=s-d.length,d.length=s,this.get(e),Qe(this),!0}const o=new Ro(e,a,s,i,n);return o.length>this[re]?(this[W]&&this[W](e,a),!1):(this[j]+=o.length,this[M].unshift(o),this[I].set(e,this[M].head),Qe(this),!0)}has(e){if(!this[I].has(e))return!1;const a=this[I].get(e).value;return!Ae(this,a)}get(e){return He(this,e,!0)}peek(e){return He(this,e,!1)}pop(){const e=this[M].tail;return e?(ve(this,e),e.value):null}del(e){ve(this,this[I].get(e))}load(e){this.reset();const a=Date.now();for(let n=e.length-1;n>=0;n--){const i=e[n],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-a;o>0&&this.set(i.k,i.v,o)}}}prune(){this[I].forEach((e,a)=>He(this,a,!1))}}const He=(t,e,a)=>{const n=t[I].get(e);if(n){const i=n.value;if(Ae(t,i)){if(ve(t,n),!t[ke])return}else a&&(t[_a]&&(n.value.now=Date.now()),t[M].unshiftNode(n));return i.value}},Ae=(t,e)=>{if(!e||!e.maxAge&&!t[oe])return!1;const a=Date.now()-e.now;return e.maxAge?a>e.maxAge:t[oe]&&a>t[oe]},Qe=t=>{if(t[j]>t[re])for(let e=t[M].tail;t[j]>t[re]&&e!==null;){const a=e.prev;ve(t,e),e=a}},ve=(t,e)=>{if(e){const a=e.value;t[W]&&t[W](a.key,a.value),t[j]-=a.length,t[I].delete(a.key),t[M].removeNode(e)}};class Ro{constructor(e,a,n,i,s){this.key=e,this.value=a,this.length=n,this.now=i,this.maxAge=s||0}}const Bt=(t,e,a,n)=>{let i=a.value;Ae(t,i)&&(ve(t,a),t[ke]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};var zt=Mo;const Lo=400,Ao=422,Vo=503;class Yo{constructor(e){this.lookbackInterval=60*60*1e3*12,this.httpMethod="POST",this.apiPrefix="/api/v1",this.fetchFn=(a,n)=>fetch(a,n),this.url=e.url?e.url:"",this.errorHandler=e.httpErrorHandler,e.lookbackInterval&&(this.lookbackInterval=e.lookbackInterval),e.fetchFn&&(this.fetchFn=e.fetchFn),e.httpMethod&&(this.httpMethod=e.httpMethod),e.apiPrefix&&(this.apiPrefix=e.apiPrefix)}labelNames(e){const a=new Date,n=new Date(a.getTime()-this.lookbackInterval);if(e===void 0||e===""){const i=this.buildRequest(this.labelsEndpoint(),new URLSearchParams({start:n.toISOString(),end:a.toISOString()}));return this.fetchAPI(i.uri,{method:this.httpMethod,body:i.body}).catch(s=>(this.errorHandler&&this.errorHandler(s),[]))}return this.series(e).then(i=>{const s=new Set;for(const o of i)for(const[u]of Object.entries(o))u!=="__name__"&&s.add(u);return Array.from(s)})}labelValues(e,a,n){const i=new Date,s=new Date(i.getTime()-this.lookbackInterval);if(!a||a.length===0){const o=new URLSearchParams({start:s.toISOString(),end:i.toISOString()});return this.fetchAPI(`${this.labelValuesEndpoint().replace(/:name/gi,e)}?${o}`).catch(u=>(this.errorHandler&&this.errorHandler(u),[]))}return this.series(a,n,e).then(o=>{const u=new Set;for(const d of o)for(const[l,c]of Object.entries(d))l!=="__name__"&&l===e&&u.add(c);return Array.from(u)})}metricMetadata(){return this.fetchAPI(this.metricMetadataEndpoint()).catch(e=>(this.errorHandler&&this.errorHandler(e),{}))}series(e,a,n){const i=new Date,s=new Date(i.getTime()-this.lookbackInterval),o=this.buildRequest(this.seriesEndpoint(),new URLSearchParams({start:s.toISOString(),end:i.toISOString(),"match[]":ho(e,a,n)}));return this.fetchAPI(o.uri,{method:this.httpMethod,body:o.body}).catch(u=>(this.errorHandler&&this.errorHandler(u),[]))}metricNames(){return this.labelValues("__name__")}flags(){return this.fetchAPI(this.flagsEndpoint()).catch(e=>(this.errorHandler&&this.errorHandler(e),{}))}fetchAPI(e,a){return this.fetchFn(this.url+e,a).then(n=>{if(!n.ok&&![Lo,Ao,Vo].includes(n.status))throw new Error(n.statusText);return n}).then(n=>n.json()).then(n=>{if(n.status==="error")throw new Error(n.error!==void 0?n.error:'missing "error" field in response JSON');if(n.data===void 0)throw new Error('missing "data" field in response JSON');return n.data})}buildRequest(e,a){let n=e,i=a;return this.httpMethod==="GET"&&(n=`${n}?${a}`,i=null),{uri:n,body:i}}labelsEndpoint(){return`${this.apiPrefix}/labels`}labelValuesEndpoint(){return`${this.apiPrefix}/label/:name/values`}seriesEndpoint(){return`${this.apiPrefix}/series`}metricMetadataEndpoint(){return`${this.apiPrefix}/metadata`}flagsEndpoint(){return`${this.apiPrefix}/status/flags`}}class No{constructor(e){const a=e&&e.maxAge?e.maxAge:3e5;this.completeAssociation=new zt(a),this.metricMetadata={},this.labelValues=new zt(a),this.labelNames=[],this.flags={},e!=null&&e.initialMetricList&&this.setLabelValues("__name__",e.initialMetricList)}setAssociations(e,a){a.forEach(n=>{let i=this.completeAssociation.get(e);i||(i=new Map,this.completeAssociation.set(e,i));for(const[s,o]of Object.entries(n)){if(s==="__name__")continue;const u=i.get(s);u===void 0?i.set(s,new Set([o])):u.add(o)}})}setFlags(e){this.flags=e}getFlags(){return this.flags}setMetricMetadata(e){this.metricMetadata=e}getMetricMetadata(){return this.metricMetadata}setLabelNames(e){this.labelNames=e}getLabelNames(e){if(!e||e.length===0)return this.labelNames;const a=this.completeAssociation.get(e);return a?Array.from(a.keys()):[]}setLabelValues(e,a){this.labelValues.set(e,a)}getLabelValues(e,a){if(!a||a.length===0){const i=this.labelValues.get(e);return i||[]}const n=this.completeAssociation.get(a);if(n){const i=n.get(e);return i?Array.from(i):[]}return[]}}class Uo{constructor(e,a){this.client=e,this.cache=new No(a)}labelNames(e){const a=this.cache.getLabelNames(e);return a&&a.length>0?Promise.resolve(a):e===void 0||e===""?this.client.labelNames().then(n=>(this.cache.setLabelNames(n),n)):this.series(e).then(()=>this.cache.getLabelNames(e))}labelValues(e,a){const n=this.cache.getLabelValues(e,a);return n&&n.length>0?Promise.resolve(n):a===void 0||a===""?this.client.labelValues(e).then(i=>(this.cache.setLabelValues(e,i),i)):this.series(a).then(()=>this.cache.getLabelValues(e,a))}metricMetadata(){const e=this.cache.getMetricMetadata();return e&&Object.keys(e).length>0?Promise.resolve(e):this.client.metricMetadata().then(a=>(this.cache.setMetricMetadata(a),a))}series(e){return this.client.series(e).then(a=>(this.cache.setAssociations(e,a),a))}metricNames(){return this.labelValues("__name__")}flags(){const e=this.cache.getFlags();return e&&Object.keys(e).length>0?Promise.resolve(e):this.client.flags().then(a=>(this.cache.setFlags(a),a))}}function Io(t){const e=t;return typeof e.labelNames=="function"&&typeof e.labelValues=="function"&&typeof e.metricMetadata=="function"&&typeof e.series=="function"&&typeof e.metricNames=="function"}function Ft(t){return t!=null&&t.completeStrategy?t.completeStrategy:t!=null&&t.remote?Io(t.remote)?new Ze(t.remote,t.maxMetricsMetadata):new Ze(new Uo(new Yo(t.remote),t.remote.cache),t.maxMetricsMetadata):new Ze}class Bo{promQL(){return e=>{const a=new Oo(e.state);return a.analyze(),a.getDiagnostics()}}}function zo(){return new Bo}function Fo(t,e){return Aa(t.call(e))}var ut;(function(t){t.PromQL="PromQL",t.MetricName="MetricName"})(ut||(ut={}));function Go(t){return Zt.define({parser:qi.configure({top:t}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}})}class Gt{constructor(){this.complete=Ft(),this.lint=zo(),this.enableLinter=!0,this.enableCompletion=!0}setComplete(e){return this.complete=Ft(e),this}getComplete(){return this.complete}activateCompletion(e){return this.enableCompletion=e,this}setLinter(e){return this.lint=e,this}getLinter(){return this.lint}activateLinter(e){return this.enableLinter=e,this}asExtension(e=ut.PromQL){const a=Go(e);let n=[a];if(this.enableCompletion){const i=a.data.of({autocomplete:s=>this.complete.promQL(s)});n=n.concat(i)}return this.enableLinter&&(n=n.concat(Fo(this.lint.promQL,this.lint))),n}}const Zo=t=>(Ve("data-v-a43ca127"),t=t(),Ye(),t),Wo={class:"mr-4"},jo={class:"mr-4"},Ho={key:0},Jo={key:1},Ko={class:"query-select"},es=Zo(()=>$("svg",{class:"icon"},[$("use",{href:"#question"})],-1)),ts={class:"ml-4"},as={class:"ml-2"},ns=ye({__name:"editor",props:{spellcheck:{type:Boolean,default:!0},autofocus:{type:Boolean,default:!0},indentWithTab:{type:Boolean,default:!0},tabSize:{default:2}},setup(t){const{codes:e,queryType:a,cursorAt:n,queryOptions:i,primaryCodeRunning:s,secondaryCodeRunning:o,sqlView:u,promqlView:d}=Ke(),l=H(),c=H(),b=H();H(!1),H(!1);const v=Na({time:5,step:"30s",range:[fe().subtract(5,"minute").unix().toString(),fe().unix().toString()]}),{runQuery:k}=Ke(),{originTablesTree:q}=Ne(Ha()),S=K(()=>{if(e.value[a.value].trim().length===0)return!0;if(a.value==="promql"){const w=v.range?v.range.length>0:!1;if(v.step.trim().length===0||!v.time&&!w)return!0}return!!(s.value||o.value)}),m=w=>{u.value=w.view},E=w=>{d.value=w.view},C={height:"250px"},V=w=>{const P=w==="sql"?u.value:d.value;if(P&&w===a.value){const{state:A}=P,{ranges:F}=A.selection;if(n.value=[F[0].from,F[0].to],l.value=A.doc.lineAt(F[0].from).number,c.value=A.doc.lineAt(F[0].to).number,A.doc.text)b.value=A.doc.text.slice(l.value-1,c.value).join(" ");else{let G=[];A.doc.children.forEach(be=>{G=G.concat(be.text)}),b.value=G.slice(l.value-1,c.value).join(" ")}}},T=async()=>{s.value=!0,await k(e.value[a.value].trim(),a.value,!1,v),s.value=!1},z=K(()=>!b.value||b.value.trim().length===0?!0:S.value),N=async()=>{o.value=!0,await k(b.value.trim(),a.value,!1,v),o.value=!1},U=tn.map(w=>({value:w,label:`Last ${w} minutes`})),L=[{key:"alt-Enter",run:()=>{T()}},{key:"ctrl-Enter",run:()=>{N()}}],ee=K(()=>{const w={},P=new Set;return q.value.forEach(A=>{const F=A.columns.map(G=>(P.add(G.title),G.title));w[A.title]=F,P.add(A.title)}),{sql:{schema:w},promql:P}}),te={sql:[At(ee.value.sql),Ee,qe.of(L),Va({closeOnBlur:!1})],promql:[new Gt().asExtension(),Ee,qe.of(L)]};return Ua(ee,()=>{te.sql=[At(ee.value.sql),Ee,qe.of(L)];const w=new Gt().setComplete({remote:{fetchFn:()=>Promise.reject(),cache:{initialMetricList:[...ee.value.promql]}}});te.promql=[w.asExtension(),Ee,qe.of(L)]}),(w,P)=>{const A=g("icon-loading"),F=g("icon-play-arrow"),G=g("a-button"),be=g("a-space"),ba=g("a-option"),$a=g("a-select"),Qa=hn,kt=g("a-form-item"),Pt=g("a-typography-text"),xt=g("a-list-item"),ka=g("a-list"),Pa=g("a-popover"),xa=g("a-input"),Sa=g("a-form"),St=g("a-tab-pane"),Ta=g("a-tabs"),wa=g("a-resize-box"),Xa=g("a-card");return _(),X(Xa,{class:"editor-card",bordered:!1},{default:f(()=>[O(be,{class:"space-between pb-15"},{default:f(()=>[O(be,{size:"medium"},{default:f(()=>[O(G,{type:"primary",disabled:h(S),onClick:P[0]||(P[0]=x=>T())},{default:f(()=>[$("div",Wo,[h(s)?(_(),X(A,{key:0,spin:""})):(_(),X(F,{key:1}))]),Y(D(w.$t("dashboard.runAll")),1)]),_:1},8,["disabled"]),O(G,{disabled:h(z),onClick:P[1]||(P[1]=x=>N())},{default:f(()=>[$("div",jo,[h(o)?(_(),X(A,{key:0,spin:""})):(_(),X(F,{key:1}))]),h(l)===h(c)?(_(),R("div",Ho,D(w.$t("dashboard.runLine"))+" "+D(h(l)),1)):(_(),R("div",Jo,D(w.$t("dashboard.runLines"))+" "+D(h(l))+" - "+D(h(c)),1))]),_:1},8,["disabled"])]),_:1}),$("div",Ko,[O($a,{modelValue:h(a),"onUpdate:modelValue":P[2]||(P[2]=x=>ft(a)?a.value=x:null),"trigger-props":{"content-class":"query-select"}},{default:f(()=>[(_(!0),R(he,null,me(h(i),x=>(_(),X(ba,Ia(Ba(x)),null,16))),256))]),_:1},8,["modelValue"])])]),_:1}),Ht(O(Sa,{class:"space-between prom-form mb-15",layout:"inline",model:h(v)},{default:f(()=>[O(be,{size:10},{default:f(()=>[O(kt,{"hide-label":!0},{default:f(()=>[O(Qa,{"time-length":h(v).time,"onUpdate:timeLength":P[3]||(P[3]=x=>h(v).time=x),"time-range":h(v).range,"onUpdate:timeRange":P[4]||(P[4]=x=>h(v).range=x),"flex-direction":"row-reverse","button-class":"query-time-button","relative-time-map":h(Ja),"relative-time-options":h(U)},null,8,["time-length","time-range","relative-time-map","relative-time-options"])]),_:1}),O(kt,{"hide-label":!0},{default:f(()=>[O(xa,{modelValue:h(v).step,"onUpdate:modelValue":P[5]||(P[5]=x=>h(v).step=x),"hide-button":"",style:{width:"180px"},placeholder:w.$t("dashboard.step")},{prefix:f(()=>[Y("Step")]),suffix:f(()=>[O(Pa,{trigger:"hover"},{content:f(()=>[O(ka,{size:"small",split:!1,bordered:!1},{header:f(()=>[Y(D(w.$t("dashboard.supportedDurations")),1)]),default:f(()=>[(_(!0),R(he,null,me(h(Ka),x=>(_(),X(xt,{key:x},{default:f(()=>[O(Pt,{code:""},{default:f(()=>[Y(D(x.key),1)]),_:2},1024),$("span",ts,D(x.value),1)]),_:2},1024))),128)),O(xt,null,{default:f(()=>[$("span",as,D(w.$t("dashboard.examples")),1),(_(!0),R(he,null,me(h(en),x=>(_(),X(Pt,{key:x,code:""},{default:f(()=>[Y(D(x),1)]),_:2},1024))),128))]),_:1})]),_:1})]),default:f(()=>[es]),_:1})]),_:1},8,["modelValue","placeholder"])]),_:1})]),_:1})]),_:1},8,["model"]),[[Jt,h(a)==="promql"]]),O(wa,{directions:["bottom"]},{default:f(()=>[O(Ta,{class:"query-tabs","default-active-key":"sql","active-key":h(a)},{default:f(()=>[O(St,{key:"sql"},{default:f(()=>[O(h(Tt),{modelValue:h(e).sql,"onUpdate:modelValue":P[6]||(P[6]=x=>h(e).sql=x),style:C,spellcheck:t.spellcheck,autofocus:t.autofocus,"indent-with-tab":t.indentWithTab,tabSize:t.tabSize,extensions:te.sql,onReady:m,onUpdate:P[7]||(P[7]=x=>V("sql"))},null,8,["modelValue","spellcheck","autofocus","indent-with-tab","tabSize","extensions"])]),_:1}),O(St,{key:"promql"},{default:f(()=>[O(h(Tt),{modelValue:h(e).promql,"onUpdate:modelValue":P[8]||(P[8]=x=>h(e).promql=x),style:C,spellcheck:t.spellcheck,autofocus:t.autofocus,"indent-with-tab":t.indentWithTab,tabSize:t.tabSize,extensions:te.promql,onReady:E,onUpdate:P[9]||(P[9]=x=>V("promql"))},null,8,["modelValue","spellcheck","autofocus","indent-with-tab","tabSize","extensions"])]),_:1})]),_:1},8,["active-key"])]),_:1})]),_:1})}}});const is=_e(ns,[["__scopeId","data-v-a43ca127"]]),Qt=t=>(Ve("data-v-1ffa8a77"),t=t(),Ye(),t),rs=Qt(()=>$("svg",{class:"icon-16"},[$("use",{href:"#clear"})],-1)),os={key:0,class:"icon-16"},ss=Qt(()=>$("use",{href:"#zoom-out"},null,-1)),ls=[ss],cs={key:1,class:"icon-16"},us=Qt(()=>$("use",{href:"#zoom"},null,-1)),ds=[us],fs=ye({__name:"index",setup(t){const{queryModalVisible:e}=Ne(se());se();const{getResultsByType:a,sqlView:n,promqlView:i,queryType:s,clearCode:o}=Ke(),u=60,d=16,l=242,c=H(!1);H(!1);const b=["sql","promql"],v=K(()=>a(b)),k=()=>{s.value==="sql"?n.value.focus():i.value.focus()};return Kt(()=>{c.value=!1}),(q,S)=>{const m=g("a-button"),E=g("a-tooltip"),C=g("a-space"),V=is,T=Ya,z=g("a-scrollbar"),N=g("a-modal");return _(),X(N,{class:de(["query-modal",{"full-screen":h(c)}]),visible:h(e),"onUpdate:visible":S[1]||(S[1]=U=>ft(e)?e.value=U:null),"ok-text":q.$t("guide.confirm"),"hide-cancel":!0,width:h(c)?`calc(100vw - ${l}px - 32px)`:636,mask:!1,"align-center":!1,"mask-style":{"pointer-events":"none"},footer:!1,draggable:!0,onOpen:k},{title:f(()=>[Y(D(q.$t("menu.dashboard.query")),1),O(C,{fill:"",size:3},{default:f(()=>[O(E,{mini:"",content:q.$t("dashboard.clearCode")},{default:f(()=>[O(m,{class:"screen-button",type:"text",size:"small",onClick:h(o)},{icon:f(()=>[rs]),_:1},8,["onClick"])]),_:1},8,["content"]),O(m,{class:"screen-button",type:"text",size:"small",onClick:S[0]||(S[0]=U=>c.value=!h(c))},{icon:f(()=>[h(c)?(_(),R("svg",os,ls)):(_(),R("svg",cs,ds))]),_:1})]),_:1})]),default:f(()=>[O(C,{class:"editor-space",align:"start",fill:"",size:0},{default:f(()=>[O(z,{style:za({height:`calc(100vh - ${d*2+u}px)`,overflow:"auto"})},{default:f(()=>{var U;return[O(V),(U=h(v))!=null&&U.length?(_(),X(T,{key:0,class:"modal-view",results:h(v),types:b},null,8,["results"])):Je("",!0)]}),_:1},8,["style"])]),_:1})]),_:1},8,["visible","class","ok-text","width"])}}});const ps=_e(fs,[["__scopeId","data-v-1ffa8a77"]]),hs={xmlns:"http://www.w3.org/2000/svg",width:"295",height:"57"},ms=$("g",{fill:"none","fill-rule":"evenodd"},[$("path",{fill:"#8322FF",stroke:"#8322FF","stroke-width":".4",d:"M40.01 36.062h-4.478a10.284 10.284 0 0 1-7.015 2.75c-5.7 0-10.32-4.617-10.32-10.312 0-5.695 4.62-10.313 10.32-10.313a10.32 10.32 0 0 1 10.176 8.594h3.476c-.847-6.783-6.636-12.031-13.652-12.031-7.599 0-13.758 6.156-13.758 13.75 0 7.593 6.16 13.75 13.758 13.75 4.803 0 9.032-2.46 11.492-6.188Zm7.713 0c-3.018 7.65-10.48 13.062-19.206 13.062-11.398 0-20.638-9.233-20.638-20.624 0-11.39 9.24-20.625 20.638-20.625 10.819 0 19.693 8.32 20.567 18.906H45.63c-.863-8.686-8.195-15.47-17.113-15.47-9.498 0-17.198 7.696-17.198 17.189 0 9.492 7.7 17.187 17.198 17.187 6.783 0 12.649-3.924 15.448-9.625h3.758ZM28.517 56C43.252 56 55.283 44.423 56 29.875H31.67a3.44 3.44 0 0 1-6.593-1.375 3.438 3.438 0 0 1 3.44-3.438 3.44 3.44 0 0 1 2.98 1.719h3.682A6.882 6.882 0 0 0 21.638 28.5a6.877 6.877 0 0 0 6.879 6.875 6.865 6.865 0 0 0 5.228-2.407H52.18c-2.096 11.155-11.893 19.594-23.663 19.594C15.219 52.562 4.44 41.79 4.44 28.5c0-13.29 10.78-24.063 24.077-24.063 12.719 0 23.135 9.857 24.017 22.344h3.447C55.094 12.394 43.137 1 28.517 1 13.319 1 1 13.312 1 28.5S13.32 56 28.517 56Z"}),$("path",{fill:"#242424",d:"M224 30c.651-2.582 2.419-4 5.07-4 2.093 0 4.186 1.063 4.93 4h-10Zm.033 5.727h15.702c.177-.863.265-1.772.265-2.727 0-6.864-4.777-12-11.235-12C221.777 21 217 26.227 217 33s4.688 12 12.252 12c4.202 0 7.475-1.59 9.642-4.682l-5.307-3.136c-.885 1-2.433 1.727-4.247 1.727-2.432 0-4.467-.818-5.307-3.182ZM207.387 21c-3.219 0-5.304 1.163-6.574 2.953-1.269-1.88-3.264-2.953-5.938-2.953-3.038 0-5.032 1.163-6.075 2.685v-2.059H182V44h6.8V31.381c0-2.64 1.27-4.206 3.536-4.206 2.176 0 3.264 1.432 3.264 3.67V44h6.8V31.381c0-2.64 1.27-4.206 3.536-4.206 2.176 0 3.264 1.432 3.264 3.67V44h6.8V30.263c0-5.594-3.4-9.263-8.613-9.263ZM173 44h7V21h-7v23Zm3-25c2.178 0 4-1.822 4-4s-1.822-4-4-4-4 1.822-4 4 1.822 4 4 4Zm-5 8.793v-6.487h-4.64V15l-6.756 2.027v4.28H156v6.486h3.604v7.973c0 6.306 2.567 8.964 11.396 8.063v-6.126c-2.973.18-4.64 0-4.64-1.937v-7.973H171ZM145.5 38c-3.19 0-5.5-2.119-5.5-5.5s2.31-5.5 5.5-5.5 5.5 2.119 5.5 5.5-2.31 5.5-5.5 5.5Zm.838-17c-2.989 0-5.174 1.03-6.647 2.734v-2.107H133V53h6.691V41.93c1.473 1.703 3.658 2.734 6.647 2.734 5.844 0 10.662-5.154 10.662-11.832C157 26.154 152.182 21 146.338 21ZM115.5 30c.651-2.582 2.419-4 5.07-4 2.093 0 4.186 1.063 4.93 4h-10Zm.033 5.727h15.702c.177-.863.265-1.772.265-2.727 0-6.864-4.777-12-11.235-12-6.988 0-11.765 5.227-11.765 12s4.688 12 12.252 12c4.202 0 7.475-1.59 9.642-4.682l-5.307-3.136c-.885 1-2.433 1.727-4.247 1.727-2.432 0-4.467-.818-5.307-3.182ZM102.5 25.465V21.45H96V44h6.5V33.808c0-4.465 3.813-5.592 6.5-5.141V21c-2.73 0-5.633 1.443-6.5 4.465ZM94 26.687H78.465v6.346h8.276c-1.106 3.037-3.806 4.896-7.922 4.896-6.02 0-9.737-3.944-9.737-9.338 0-5.576 3.894-9.52 9.117-9.52 3.497 0 6.285 1.632 7.569 3.717l6.019-3.535C89.176 14.992 84.174 12 78.243 12 69.126 12 62 19.343 62 28.545 62 37.657 68.993 45 78.73 45 87.405 45 94 39.107 94 29.407v-2.72Z"}),$("path",{fill:"#8322FF",d:"M284.624 37.817h-5.987V31.77h5.987c1.788 0 2.95 1.264 2.95 3.024s-1.162 3.023-2.95 3.023Zm-.893-18.049c1.653 0 2.725 1.173 2.725 2.798 0 1.624-1.117 2.797-2.725 2.797h-5.094v-5.595h5.094Zm7.149 8.438c1.698-1.49 2.725-3.565 2.725-6.182 0-5.46-4.423-9.024-9.874-9.024h-12.243v31.585h13.136c5.585 0 10.098-3.655 10.098-9.25 0-3.204-1.519-5.64-3.842-7.13Zm-36.37 9.43h-5.361V19.95h5.362c4.915 0 8.31 3.429 8.31 8.843 0 5.415-3.395 8.844-8.31 8.844Zm0-24.636H242v31.585h12.51c8.624 0 15.192-6.859 15.192-15.793S263.134 13 254.511 13Z"})],-1),Os=[ms];function vs(t,e){return _(),R("svg",hs,Os)}const gs={render:vs},ys=[...an,...nn],_s=ys.map(t=>{const{name:e,path:a,meta:n,redirect:i,children:s}=t;return{name:e,path:a,meta:n,redirect:i,children:s}});function bs(){const t=rn(),e=se(),a=K(()=>e.menuFromServer?e.appAsyncMenus:_s);return{menuTree:K(()=>{const i=JSON.parse(JSON.stringify(a.value));i.sort((o,u)=>(o.meta.order||0)-(u.meta.order||0));function s(o,u){return o?o.map(l=>{var b,v;if(!t.accessRouter(l))return null;if(((b=l.meta)==null?void 0:b.hideChildrenInMenu)||!l.children)return l.children=[],l;l.children=l.children.filter(k=>{var q;return((q=k.meta)==null?void 0:q.hideInMenu)!==!0});const c=s(l.children,u+1);return c.length||u>1?(l.children=c,l):((v=l.meta)==null?void 0:v.hideInMenu)===!1?l:null}).filter(Boolean):null}return s(i,0)})}}const Ce=t=>(Ve("data-v-213ae38d"),t=t(),Ye(),t),$s=Ce(()=>$("div",{class:"logo-space"},[$("img",{class:"logo-text-img",alt:"logo",src:gs})],-1)),Qs={class:"new-query"},ks=Ce(()=>$("span",null,"+",-1)),Ps=Ce(()=>$("span",null,"New Query",-1)),xs={class:"menu"},Ss={class:"icon-18"},Ts=["href"],ws={class:"footer"},Xs=Ce(()=>$("svg",{class:"icon-16"},[$("use",{href:"#settings"})],-1)),Cs=Ce(()=>$("svg",{class:"icon"},[$("use",{href:"#menu"})],-1)),Es=ye({__name:"index",setup(t){const{updateSettings:e}=se(),{menuSelectedKey:a,globalSettings:n,queryModalVisible:i}=Ne(se()),{menuTree:s}=bs(),o=s.value[0].children,u=[{link:"https://greptime.com/",label:"Home"},{link:"https://docs.greptime.com/",label:"Docs"},{link:"https://github.com/GreptimeTeam/dashboard",label:"GitHub | Dashboard"},{link:"https://github.com/GreptimeTeam/greptimedb",label:"GitHub | GreptimeDB"}],d=()=>{e({globalSettings:!0})},l=v=>{Xt.push({name:v})},c=v=>{const k=Xt.resolve({name:v});window.open(k.fullPath,"_blank")};Kt(v=>{a.value=v.name},!0);const b=()=>{e({queryModalVisible:!i.value})};return(v,k)=>{const q=g("a-layout-header"),S=g("a-button"),m=g("a-menu-item"),E=g("a-menu"),C=g("a-layout-content"),V=g("a-link"),T=g("a-doption"),z=g("a-dropdown"),N=g("a-layout-footer"),U=g("a-layout");return _(),X(U,{class:"navbar"},{default:f(()=>[O(q,null,{default:f(()=>[$s]),_:1}),O(C,null,{default:f(()=>[$("div",Qs,[O(S,{type:"primary",onClick:b},{default:f(()=>[ks,Ps]),_:1})]),$("div",xs,[O(E,{mode:"vertical","selected-keys":[h(a)]},{default:f(()=>[(_(!0),R(he,null,me(h(o),(L,ee)=>(_(),X(m,{key:L.name,onClick:[ze(te=>c(L.name),["meta"]),ze(te=>c(L.name),["ctrl"]),ze(te=>l(L.name),["exact"])]},{icon:f(()=>[(_(),R("svg",Ss,[$("use",{href:`#${L.meta.icon}`},null,8,Ts)]))]),default:f(()=>[$("span",null,D(v.$t(L.meta.locale)),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["selected-keys"])])]),_:1}),O(N,null,{default:f(()=>[$("ul",ws,[$("li",null,[O(S,{style:{width:"100%"},type:"text",class:de({hover:h(n)}),onClick:d},{icon:f(()=>[Xs]),default:f(()=>[Y(D(v.$t("settings.title")),1)]),_:1},8,["class"])]),$("li",null,[O(z,{class:"menu-dropdown",trigger:"hover",position:"right","popup-max-height":!1},{content:f(()=>[(_(),R(he,null,me(u,({label:L,link:ee})=>O(T,null,{default:f(()=>[O(V,{target:"_blank",href:ee},{default:f(()=>[Y(D(L),1)]),_:2},1032,["href"])]),_:2},1024)),64))]),default:f(()=>[O(S,{style:{width:"100%"},type:"text"},{icon:f(()=>[Cs]),default:f(()=>[Y(D(v.$t("navbar.docs")),1)]),_:1})]),_:1})])])]),_:1})]),_:1})}}});const qs=_e(Es,[["__scopeId","data-v-213ae38d"]]);const Ds={};function Ms(t,e){const a=g("a-layout-footer");return _(),X(a,{class:"footer"},{default:f(()=>[Y("\xA9Copyright 2022 Greptime Inc. All Rights Reserved")]),_:1})}const Rs=_e(Ds,[["render",Ms],["__scopeId","data-v-d90f7d0d"]]);function Ls(t,e,a,n=!1){t.addEventListener&&typeof t.addEventListener=="function"&&t.addEventListener(e,a,n)}function As(t,e,a,n=!1){t.removeEventListener&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,a,n)}const Vs=992;function Ys(){return document.body.getBoundingClientRect().width-1<Vs}function Ns(t){const e=se();function a(){if(!document.hidden){const i=Ys();e.toggleDevice(i?"mobile":"desktop"),e.toggleMenu(i)}}const n=sn(a,100);Fa(()=>{t&&n()}),Ga(()=>{Ls(window,"resize",n)}),Za(()=>{As(window,"resize",n)})}const Us=ye({__name:"page-layout",setup(t){const e=ln(),a=on();return K(()=>a.getCacheList),(n,i)=>{const s=g("router-view");return _(),X(s,null,{default:f(({Component:o})=>[O(ja,{name:"fade",mode:"out-in",appear:""},{default:f(()=>[h(e).meta.ignoreCache?(_(),X(wt(o),{key:h(e).fullPath})):(_(),X(Wa,{key:1},[(_(),X(wt(o),{key:h(e).name}))],1024))]),_:2},1024)]),_:1})}}}),Is=ye({__name:"default-layout",setup(t){Ns(!0);const{navbar:e,footer:a}=Ne(se());return(n,i)=>{const s=qs,o=g("a-layout-sider"),u=g("a-layout-content"),d=ps,l=g("a-layout");return _(),X(l,{class:"layout-container"},{default:f(()=>[O(o,{class:"main-sider",width:242},{default:f(()=>[h(e)?(_(),X(s,{key:0})):Je("",!0)]),_:1}),O(u,{class:"layout-content"},{default:f(()=>[O(Us)]),_:1}),h(a)?(_(),X(Rs,{key:0})):Je("",!0),O(d)]),_:1})}}});const Hs=_e(Is,[["__scopeId","data-v-8d11b470"]]);export{Hs as default};
