import{u as V,_ as K,b as R}from"./index.89c26ee4.js";import{d as E,e as $,w as F,aI as r,D as i,aF as f,aH as a,aJ as s,aM as h,aN as y,E as G,aL as H,aK as I,u as b,aG as L,H as d}from"./arco.643eb8a8.js";import{h as S}from"./index.6953f38d.js";const J=d("svg",{class:"icon-16"},[d("use",{href:"#chart"})],-1),M=d("svg",{class:"icon-16"},[d("use",{href:"#table"})],-1),P=E({__name:"index",props:{results:null,types:null},setup(k){var v,C;const t=k,{removeResult:x,clear:w}=S(),n=$((v=t.results[0])==null?void 0:v.key),_=$((C=t.results[0])==null?void 0:C.key),D=async e=>{var c;const l=t.results.findIndex(u=>u.key===e&&t.types.includes(u.type));t.results.length===1&&(_.value=t.results[0].key),await x(e,t.results[l].type),n.value===e&&(n.value=((c=t.results[l])==null?void 0:c.key)||t.results.slice(-1)[0].key)},z=e=>{n.value=e},N=()=>{_.value=t.results[0].key,w(t.types)};return F(()=>({...t}),(e,l)=>{e.results.length>l.results.length&&(n.value=t.results.slice(-1)[0].key)}),(e,l)=>{const c=r("a-button"),u=r("a-popconfirm"),p=r("a-space"),B=K,m=r("a-tab-pane"),T=R,g=r("a-tabs");return i(),f(g,{class:"result-tabs",type:"rounded","lazy-load":"",editable:"","active-key":b(n),animation:!0,onTabClick:z,onDelete:D},{extra:a(()=>[s(u,{content:"Clear results?",type:"warning","ok-text":"Clear","cancel-text":"",onOk:N},{default:a(()=>[s(c,{status:"danger",size:"small"},{default:a(()=>[h(y(e.$t("dashboard.clear")),1)]),_:1})]),_:1})]),default:a(()=>[(i(!0),G(H,null,I(k.results,(o,O)=>(i(),f(m,{key:o.key,closable:"",title:`${e.$t("dashboard.result")} ${o.key-b(_)+1}`},{default:a(()=>[s(p,{direction:"vertical",size:"small",fill:""},{default:a(()=>[s(g,{class:"data-view-tabs",animation:!0},{default:a(()=>[b(V)(o).hasChart.value?(i(),f(m,{key:"chart",title:e.$t("dashboard.chart")},{title:a(()=>[s(p,{size:10},{default:a(()=>[J,h(y(e.$t("dashboard.chart")),1)]),_:1})]),default:a(()=>[s(B,{data:o,"has-header":!1},null,8,["data"])]),_:2},1032,["title"])):L("",!0),s(m,{key:"table",title:e.$t("dashboard.table")},{title:a(()=>[s(p,{size:10},{default:a(()=>[M,h(y(e.$t("dashboard.table")),1)]),_:1})]),default:a(()=>[s(T,{data:o,"has-header":!1},null,8,["data"])]),_:2},1032,["title"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["title"]))),128))]),_:1},8,["active-key"])}}});export{P as _};
