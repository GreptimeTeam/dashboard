import{aG as h,B as b,C as k,aH as t,aF as a,aJ as K,G as B,F as e,aK as s,d as P,r as v,aD as D,aL as I,u as d,j as O,b4 as Y,aE as R,c as Q,o as H}from"./arco.e8535106.js";import{p as x,u as L,b as z,_ as U}from"./index.9b7df14a.js";import{s as W}from"./vue.01353f09.js";import{o as X,T as J,d as Z,e as ee,_ as te}from"./index.ee4d69c2.js";import{s as oe}from"./index.ba014373.js";import"./chart.3c0feddf.js";const ae={title:"Quick Start"},se=B('<h1>Getting Started</h1><h2>Preface</h2><p>Greetings from Greptime Play! Apart from just following a word-document guide, this interactive playground will quickly familiarize you with GreptimeDB and help you to get the most out of it.</p><div class="tip custom-block"><p class="custom-block-title">Cool feature alert:</p><p>all code blocks in this guide are editable and executable!</p></div><p>By hitting the <code>Run</code> button, the code will be executed and run in a temporary, private instance generated from <a href="https://greptime.com/product/cloud">GreptimeCloud</a>. <strong>You can also explore and experiment with different ideas by editing the codes.</strong></p><div class="danger custom-block"><p class="custom-block-title">Note that:</p><p>The instance is valid within <strong>1 hour</strong> once initiated, and you will need to create a new one when the time is up. So please never store important data in Greptime Play sessions.</p></div><h2>Create a Time-Series Table</h2><p>Let&#39;s start the journey by creating a simple <code>system_metrics</code> table first. Note that we pre-defined <code>host</code> and <code>idc</code> as the primary keys; <code>ts</code> and time index, both are important to know in GreptimeDB. Click <code>Run</code> on the upper left in the panel below to create the table:</p>',8),ne=e("pre",null,[e("code",{class:"language-sql"},`CREATE TABLE IF NOT EXISTS system_metrics (
    host STRING,
    idc STRING,
    cpu_util DOUBLE,
    memory_util DOUBLE,
    disk_util DOUBLE,
    ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(host, idc),
    TIME INDEX(ts)
);
`)],-1),le=B("<p>Once the green marker appears, run <code>DESC TABLE</code> to view the details of the table.</p><p>In GreptimeDB, there are three types of columns:</p><ul><li><code>PRIMARY KEY</code>: key columns that are used for sorting and partitioning</li><li><code>FIELD</code>: columns which store table values</li><li><code>TIME INDEX</code>: columns of data type TIME</li></ul>",3),ce=e("pre",null,[e("code",{class:"language-sql"},`DESC TABLE system_metrics;
`)],-1),re=e("h2",null,"Add Some Data",-1),de=e("p",null,[s("Using the "),e("code",null,"INSERT"),s(" statement to easily add data to the table. Below example inserts three rows into the "),e("code",null,"system_metrics"),s(" table.")],-1),ie=e("pre",null,[e("code",{class:"language-sql"},`INSERT INTO system_metrics
VALUES
    ("host1", "idc_a", 11.8, 10.3, 10.3, 1667446791450),
    ("host2", "idc_a", 80.1, 70.3, 90.0, 1667446792460),
    ("host1", "idc_b", 50.0, 66.7, 40.6, 1667446793470);
`)],-1),ue=e("p",null,"Ingest more entries by modifying the values and timestamps.",-1),_e=e("pre",null,[e("code",{class:"language-sql"},`INSERT INTO system_metrics
VALUES
    ("host1", "idc_a", 30.2, 50.1, 11.0, 1667446794480),
    ("host2", "idc_a", 60.8, 74.9, 96.2, 1667446795490),
    ("host1", "idc_b", 30.0, 65.7, 40.2, 1667446796500);
`)],-1),pe=e("h2",null,"Query Data with SQL",-1),me=e("p",null,"GreptimeDB fully supports SQL.",-1),he=e("pre",null,[e("code",{class:"language-sql"},`SELECT * FROM system_metrics ORDER BY ts DESC;
`)],-1),ge=e("p",null,[s("We list some SQL examples below of the "),e("code",null,"system_metrics"),s(" table, for you to get familiar with using SQL alongside GreptimeDB's functions.")],-1),fe=e("p",null,[s("Use "),e("code",null,"count()"),s(" function to get the number of all rows in the table:")],-1),ye=e("pre",null,[e("code",{class:"language-sql"},`SELECT count(*) FROM system_metrics;
`)],-1),be=e("p",null,[s("The "),e("code",null,"avg()"),s(" function returns the average value of a certain field:")],-1),Ee=e("pre",null,[e("code",{class:"language-sql"},`SELECT avg(cpu_util) FROM system_metrics;
`)],-1),ve=e("p",null,[s("Use the "),e("code",null,"GROUP BY"),s(" clause to group rows that have the same values into summary rows. The code below groups average memory usage by "),e("code",null,"idc"),s(":")],-1),we=e("pre",null,[e("code",{class:"language-sql"},`SELECT idc, avg(memory_util) FROM system_metrics GROUP BY idc;
`)],-1),Te=B("<p>There are more aggregate function available, change <code>avg</code> to any of these below and try out:</p><p><code>max</code> / <code>min</code> / <code>sum</code> / <code>mean</code></p><h2>Try it Out</h2><p>Please start exploring by writing some queries in the panel below!</p>",4),Ae=e("pre",null,[e("code",{class:"language-sql"},`
`)],-1),Se=e("p",null,[s("For other advanced features like scripting and protocol supports, "),e("a",{href:"https://greptime.com/download/"},"Download"),s(" and run GreptimeDB locally by following "),e("a",{href:"https://docs.greptime.com"},"docs"),s(".")],-1);function q(r,i){const o=h("code-editor");return b(),k(K,null,[se,t(o,{lang:"sql"},{default:a(()=>[ne]),_:1}),le,t(o,{lang:"sql"},{default:a(()=>[ce]),_:1}),re,de,t(o,{lang:"sql"},{default:a(()=>[ie]),_:1}),ue,t(o,{lang:"sql"},{default:a(()=>[_e]),_:1}),pe,me,t(o,{lang:"sql"},{default:a(()=>[he]),_:1}),ge,fe,t(o,{lang:"sql"},{default:a(()=>[ye]),_:1}),be,t(o,{lang:"sql"},{default:a(()=>[Ee]),_:1}),ve,t(o,{lang:"sql"},{default:a(()=>[we]),_:1}),Te,t(o,{lang:"sql"},{default:a(()=>[Ae]),_:1}),Se],64)}const N={render:q};N.__hmrId="/home/runner/work/dashboard/dashboard/src/views/dashboard/playground/docs/getting-started.md";const ke=r=>({components:r,render:q}),Ce=Object.freeze(Object.defineProperty({__proto__:null,attributes:ae,VueComponent:N,VueComponentWith:ke},Symbol.toStringTag,{value:"Module"})),Re="https://api.greptime.cloud",M=`${Re}/playground/db`,Ie=(r,i)=>x.get(M,{params:{token:r,db_id:i}}),Le=r=>x.post(M,{},{params:{token:r}}),De=P({__name:"index",props:{visible:{type:Boolean,default:!1}},setup(r,{expose:i}){L();const o=v(!1),{VITE_RECAPTCHA_SITE_KEY:n}={VITE_CLOUD_URL:"https://dev.greptime-cloud-frontend.pages.dev",VITE_API_BASE_URL:"https://api.greptime.cloud",VITE_RECAPTCHA_SITE_KEY:"6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},m=()=>{o.value=!o.value},g=()=>{window.grecaptcha.ready(async()=>{const _=await window.grecaptcha.execute(n,{action:"submit"}),l=await Le(_),u=btoa(JSON.stringify({username:l.username,password:l.password,database:`${l.teamId}-${l.serviceName}`,dbId:l.dbId}));window.location.href=`https://${Object.values(l.domain)[0]}/dashboard/playground?info=${u}`})};return i({toggleModal:m}),(_,l)=>{const u=h("a-modal");return b(),D(u,{class:"guide-modal",visible:d(o),"onUpdate:visible":l[0]||(l[0]=f=>O(o)?o.value=f:null),"mask-closable":!1,"ok-text":_.$t("playground.create"),"hide-cancel":!0,closable:!1,onOk:g},{title:a(()=>[s(I(_.$t("playground.refeshTitle")),1)]),footer:a(()=>[]),default:a(()=>[s(I(_.$t("playground.refeshNote")),1)]),_:1},8,["visible","ok-text"])}}}),Be=r=>new Promise((i,o)=>{var m;const n=document.createElement("script");n.src=r,n.type="text/javascript",n.defer=!0,(m=document.getElementsByTagName("head").item(0))==null||m.appendChild(n),n.onload=()=>{i(n)},n.onerror=()=>{o()}}),Pe={class:"code-editor"},Oe={class:"code"},xe={key:0,class:"operations"},Ue={key:0,class:"results"},qe={key:1,class:"logs"},Ne=P({__name:"code-editor",props:{disabled:{type:Boolean,default:!1}},setup(r){var w;const i=v(!1),{runQuery:o}=z(),n=Y(),m=L();function g(c){var E,T;return c?(c=(T=(E=c==null?void 0:c[0])==null?void 0:E.children[0])==null?void 0:T.children,Object.keys(m).forEach(S=>{c=c.replace(new RegExp(`{{${S}}}`,"g"),m[S])}),c):""}const _=g((w=n==null?void 0:n.default)==null?void 0:w.call(n)),l=v(_),u=v(),f=v(),C=()=>{l.value=_,u.value=null,f.value=null},p=async()=>{var y;i.value=!0;const c=await o(l.value.trim().replace(/\n/gi," "),"sql",!0);(y=c.record)!=null&&y.records?u.value=c.record:f.value=c.log,i.value=!1},A=[oe(),X];return(c,y)=>{const E=h("a-button"),T=Z,S=h("a-tab-pane"),V=ee,F=h("a-tabs"),G=te,$=h("a-list");return b(),k("div",Pe,[e("div",Oe,[r.disabled?R("",!0):(b(),k("div",xe,[t(E,{loading:d(i),onClick:p},{default:a(()=>[s(I(c.$t("playground.run")),1)]),_:1},8,["loading"]),t(E,{onClick:C},{default:a(()=>[s(I(c.$t("playground.reset")),1)]),_:1})])),t(d(J),{modelValue:d(l),"onUpdate:modelValue":y[0]||(y[0]=j=>O(l)?l.value=j:null),extensions:A,disabled:r.disabled},null,8,["modelValue","disabled"])]),d(u)?(b(),k("div",Ue,[t(F,{class:"playground-tabs","default-active-key":"1"},{default:a(()=>[t(S,{key:"1",title:"Table"},{default:a(()=>[t(T,{data:d(u),hasHeader:!1},null,8,["data"])]),_:1}),t(S,{key:"2",title:"Chart"},{default:a(()=>[t(V,{data:d(u),hasHeader:!1},null,8,["data"])]),_:1})]),_:1})])):R("",!0),d(f)?(b(),k("div",qe,[t($,{class:"log-list",size:"small",hoverable:!0,bordered:!1,split:!1},{default:a(()=>[t(G,{codeType:"sql",log:d(f)},null,8,["log"])]),_:1})])):R("",!0)])}}});const Me=U(Ne,[["__scopeId","data-v-b92ae6a8"]]),Ve={class:"markdown-container"},Fe=P({__name:"index",setup(r){var C;const{VITE_RECAPTCHA_SITE_KEY:i}={VITE_CLOUD_URL:"https://dev.greptime-cloud-frontend.pages.dev",VITE_API_BASE_URL:"https://api.greptime.cloud",VITE_RECAPTCHA_SITE_KEY:"6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},{isCloud:o}=W(L()),n=L(),m=v(),g=v(""),_=Object.assign({"./docs/getting-started.md":Ce}),l=Object.entries(_).map(([p,A])=>{const{attributes:w}=A;return{title:w.title,key:p}})||[];g.value=(C=l[0])==null?void 0:C.key;const u=Q(()=>{const{VueComponentWith:p}=_[g.value];return p({CodeEditor:Me})}),f=p=>{[g.value]=p};return H(async()=>{n.lifetime==="temporary"&&o.value&&(await Be("https://www.google.com/recaptcha/api.js?render=6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A"),window.grecaptcha.ready(async()=>{try{const p=await window.grecaptcha.execute(i,{action:"submit"}),A=await Ie(p,n.dbId)}catch{m.value.toggleModal()}}))}),(p,A)=>{const w=h("a-tree"),c=h("a-layout-sider"),y=De,E=h("a-layout-content"),T=h("a-layout");return b(),D(T,{class:"layout"},{default:a(()=>[t(c,null,{default:a(()=>[t(w,{class:"script-tree",blockNode:"",data:d(l),"default-selected-keys":[d(g)],onSelect:f},null,8,["data","default-selected-keys"])]),_:1}),t(E,null,{default:a(()=>[e("div",Ve,[d(u)?(b(),D(d(u),{key:0})):R("",!0)]),t(y,{ref_key:"refreshPlaygroundModal",ref:m},null,512)]),_:1})]),_:1})}}});const He=U(Fe,[["__scopeId","data-v-5e53c67e"]]);export{He as default};
