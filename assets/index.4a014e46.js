import{aG as y,B as f,C,aH as s,aF as o,aJ as z,G as U,F as e,aK as a,d as q,r as b,aD as S,aL as D,u as l,j as M,b4 as W,c as N,aE as w,o as J}from"./arco.e8535106.js";import{p as V,u as B,b as Z,_ as F}from"./index.358ff723.js";import{s as ee}from"./vue.01353f09.js";import{o as te,T as se,u as oe,d as ae,e as ne,_ as le}from"./index.c9364699.js";import{s as ce}from"./index.f07def31.js";import"./chart.b2113ba5.js";const re={title:"Quick Start"},de=U('<h1>Getting Started</h1><h2>Preface</h2><p>Greetings from Greptime Play! Apart from just following a word-document guide, this interactive playground will quickly familiarize you with GreptimeDB and help you to get the most out of it.</p><div class="tip custom-block"><p class="custom-block-title">Cool feature alert:</p><p>all code blocks in this guide are editable and executable!</p></div><p>By hitting the <code>Run</code> button, the code will be executed and run in a temporary, private instance generated from <a href="https://greptime.com/product/cloud">GreptimeCloud</a>. <strong>You can also explore and experiment with different ideas by editing the codes.</strong></p><div class="danger custom-block"><p class="custom-block-title">Note that:</p><p>The instance is valid within <strong>1 hour</strong> once initiated, and you will need to create a new one when the time is up. So please never store important data in Greptime Play sessions.</p></div><h2>Create a Time-Series Table</h2><p>Let&#39;s start the journey by creating a simple <code>system_metrics</code> table first. Note that we pre-defined <code>host</code> and <code>idc</code> as the primary keys; <code>ts</code> as time index, both are important to know in GreptimeDB. Click <code>Run</code> on the upper left in the panel below to create the table:</p>',8),ie=e("pre",null,[e("code",{class:"language-sql"},`CREATE TABLE IF NOT EXISTS system_metrics (
    host STRING,
    idc STRING,
    cpu_util DOUBLE,
    memory_util DOUBLE,
    disk_util DOUBLE,
    ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(host, idc),
    TIME INDEX(ts)
);
`)],-1),ue=U("<p>Once the green marker appears, run <code>DESC TABLE</code> to view the details of the table.</p><p>In GreptimeDB, there are three types of columns:</p><ul><li><code>PRIMARY KEY</code>: key columns that are used for sorting and partitioning</li><li><code>FIELD</code>: columns which store table values</li><li><code>TIME INDEX</code>: columns of data type TIME</li></ul>",3),_e=e("pre",null,[e("code",{class:"language-sql"},`DESC TABLE system_metrics;
`)],-1),pe=e("h2",null,"Add Some Data",-1),me=e("p",null,[a("Using the "),e("code",null,"INSERT"),a(" statement to easily add data to the table. Below example inserts three rows into the "),e("code",null,"system_metrics"),a(" table.")],-1),he=e("pre",null,[e("code",{class:"language-sql"},`INSERT INTO system_metrics
VALUES
    ("host1", "idc_a", 11.8, 10.3, 10.3, 1667446791450),
    ("host2", "idc_a", 80.1, 70.3, 90.0, 1667446792460),
    ("host1", "idc_b", 50.0, 66.7, 40.6, 1667446793470);
`)],-1),ge=e("p",null,"Ingest more entries by modifying the values and timestamps.",-1),fe=e("pre",null,[e("code",{class:"language-sql"},`INSERT INTO system_metrics
VALUES
    ("host1", "idc_a", 30.2, 50.1, 11.0, 1667446794480),
    ("host2", "idc_a", 60.8, 74.9, 96.2, 1667446795490),
    ("host1", "idc_b", 30.0, 65.7, 40.2, 1667446796500);
`)],-1),ye=e("h2",null,"Query Data with SQL",-1),be=e("p",null,"GreptimeDB fully supports SQL.",-1),ve=e("pre",null,[e("code",{class:"language-sql"},`SELECT * FROM system_metrics ORDER BY ts DESC;
`)],-1),Ee=e("p",null,[a("We list some SQL examples below of the "),e("code",null,"system_metrics"),a(" table, for you to get familiar with using SQL alongside GreptimeDB's functions.")],-1),we=e("p",null,[a("Use "),e("code",null,"count()"),a(" function to get the number of all rows in the table:")],-1),Te=e("pre",null,[e("code",{class:"language-sql"},`SELECT count(*) FROM system_metrics;
`)],-1),Ae=e("p",null,[a("The "),e("code",null,"avg()"),a(" function returns the average value of a certain field:")],-1),ke=e("pre",null,[e("code",{class:"language-sql"},`SELECT avg(cpu_util) FROM system_metrics;
`)],-1),Re=e("p",null,[a("Use the "),e("code",null,"GROUP BY"),a(" clause to group rows that have the same values into summary rows. The code below groups average memory usage by "),e("code",null,"idc"),a(":")],-1),Ce=e("pre",null,[e("code",{class:"language-sql"},`SELECT idc, avg(memory_util) FROM system_metrics GROUP BY idc;
`)],-1),Se=U("<p>There are more aggregate functions available, change <code>avg</code> to any of these below and try out:</p><p><code>max</code> / <code>min</code> / <code>sum</code> / <code>mean</code></p><h2>Try it Out</h2><p>Please start exploring by writing some queries in the panel below!</p>",4),Ie=e("pre",null,[e("code",{class:"language-sql"},`
`)],-1),Le=e("p",null,[a("For other advanced features like scripting and protocol supports, "),e("a",{href:"https://greptime.com/download/"},"Download"),a(" and run GreptimeDB locally by following "),e("a",{href:"https://docs.greptime.com"},"docs"),a(".")],-1);function G(i,_){const t=y("code-editor");return f(),C(z,null,[de,s(t,{lang:"sql"},{default:o(()=>[ie]),_:1}),ue,s(t,{lang:"sql"},{default:o(()=>[_e]),_:1}),pe,me,s(t,{lang:"sql"},{default:o(()=>[he]),_:1}),ge,s(t,{lang:"sql"},{default:o(()=>[fe]),_:1}),ye,be,s(t,{lang:"sql"},{default:o(()=>[ve]),_:1}),Ee,we,s(t,{lang:"sql"},{default:o(()=>[Te]),_:1}),Ae,s(t,{lang:"sql"},{default:o(()=>[ke]),_:1}),Re,s(t,{lang:"sql"},{default:o(()=>[Ce]),_:1}),Se,s(t,{lang:"sql"},{default:o(()=>[Ie]),_:1}),Le],64)}const $={render:G};$.__hmrId="/home/runner/work/dashboard/dashboard/src/views/dashboard/playground/docs/getting-started.md";const De=i=>({components:i,render:G}),Be=Object.freeze(Object.defineProperty({__proto__:null,attributes:re,VueComponent:$,VueComponentWith:De},Symbol.toStringTag,{value:"Module"})),Pe="https://api.greptime.cloud",j=`${Pe}/playground/db`,xe=(i,_)=>V.get(j,{params:{token:i,db_id:_}}),Oe=i=>V.post(j,{},{params:{token:i}}),Ne=q({__name:"index",props:{visible:{type:Boolean,default:!1}},setup(i,{expose:_}){B();const t=b(!1),{VITE_RECAPTCHA_SITE_KEY:n}={VITE_CLOUD_URL:"https://dev.greptime-cloud-frontend.pages.dev",VITE_API_BASE_URL:"https://api.greptime.cloud",VITE_RECAPTCHA_SITE_KEY:"6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},m=()=>{t.value=!t.value},h=()=>{window.grecaptcha.ready(async()=>{const u=await window.grecaptcha.execute(n,{action:"submit"}),r=await Oe(u),g=btoa(JSON.stringify({username:r.username,password:r.password,database:`${r.teamId}-${r.serviceName}`,dbId:r.dbId}));window.location.href=`https://${Object.values(r.domain)[0]}/dashboard/playground?info=${g}`})};return _({toggleModal:m}),(u,r)=>{const g=y("a-modal");return f(),S(g,{class:"guide-modal",visible:l(t),"onUpdate:visible":r[0]||(r[0]=p=>M(t)?t.value=p:null),"mask-closable":!1,"ok-text":u.$t("playground.create"),"hide-cancel":!0,closable:!1,onOk:h},{title:o(()=>[a(D(u.$t("playground.refeshTitle")),1)]),footer:o(()=>[]),default:o(()=>[a(D(u.$t("playground.refeshNote")),1)]),_:1},8,["visible","ok-text"])}}}),Ue=i=>new Promise((_,t)=>{var m;const n=document.createElement("script");n.src=i,n.type="text/javascript",n.defer=!0,(m=document.getElementsByTagName("head").item(0))==null||m.appendChild(n),n.onload=()=>{_(n)},n.onerror=()=>{t()}}),qe={class:"code-editor"},Me={class:"code"},Ve={key:0,class:"operations"},Fe={key:0,class:"results"},Ge={key:1,class:"logs"},$e=q({__name:"code-editor",props:{disabled:{type:Boolean,default:!1}},setup(i){var I;const _=b(!1),{runQuery:t}=Z(),n=W(),m=B(),h=b(),u=b(!1);function r(c){var k,L;return c?(c=(L=(k=c==null?void 0:c[0])==null?void 0:k.children[0])==null?void 0:L.children,Object.keys(m).forEach(R=>{c=c.replace(new RegExp(`{{${R}}}`,"g"),m[R])}),c):""}const g=r((I=n==null?void 0:n.default)==null?void 0:I.call(n)),p=b(g),v=b({records:{rows:[],schema:{column_schemas:[]}},dimensionsAndXName:{dimensions:[],xAxis:""},key:-1,type:""}),d=b(),T=()=>{p.value=g,v.value={records:{rows:[],schema:{column_schemas:[]}},dimensionsAndXName:{dimensions:[],xAxis:""},key:-1,type:""},d.value=null,h.value=!1,u.value=!1},A=async()=>{var E;_.value=!0;const c=await t(p.value.trim().replace(/\n/gi," "),"sql",!0);(E=c.lastResult)!=null&&E.records?(u.value=!0,v.value=c.lastResult,h.value=oe(v.value).hasChart.value):u.value=!1,d.value=c.log,_.value=!1},P=N(()=>p.value!==g),x=N(()=>p.value.trim()===""),O=[ce(),te];return(c,E)=>{const k=y("a-button"),L=ae,R=y("a-tab-pane"),K=ne,Y=y("a-tabs"),Q=le,H=y("a-list");return f(),C("div",qe,[e("div",Me,[i.disabled?w("",!0):(f(),C("div",Ve,[s(k,{disabled:l(x),loading:l(_),onClick:A},{default:o(()=>[a(D(c.$t("playground.run")),1)]),_:1},8,["disabled","loading"]),l(P)?(f(),S(k,{key:0,onClick:T},{default:o(()=>[a(D(c.$t("playground.reset")),1)]),_:1})):w("",!0)])),s(l(se),{modelValue:l(p),"onUpdate:modelValue":E[0]||(E[0]=X=>M(p)?p.value=X:null),extensions:O,disabled:i.disabled},null,8,["modelValue","disabled"])]),l(u)?(f(),C("div",Fe,[s(Y,{class:"playground-tabs","default-active-key":"1"},{default:o(()=>[s(R,{key:"1",title:"Table"},{default:o(()=>[s(L,{data:l(v),hasHeader:!1},null,8,["data"])]),_:1}),l(h)?(f(),S(R,{key:"2",title:"Chart"},{default:o(()=>[s(K,{data:l(v),hasHeader:!1},null,8,["data"])]),_:1})):w("",!0)]),_:1})])):w("",!0),l(d)?(f(),C("div",Ge,[s(H,{class:"log-list",size:"small",hoverable:!0,bordered:!1,split:!1},{default:o(()=>[s(Q,{codeType:"sql",log:l(d)},null,8,["log"])]),_:1})])):w("",!0)])}}});const je=F($e,[["__scopeId","data-v-33daca4e"]]),Ke={class:"markdown-container"},Ye=q({__name:"index",setup(i){var v;const{VITE_RECAPTCHA_SITE_KEY:_}={VITE_CLOUD_URL:"https://dev.greptime-cloud-frontend.pages.dev",VITE_API_BASE_URL:"https://api.greptime.cloud",VITE_RECAPTCHA_SITE_KEY:"6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},{isCloud:t}=ee(B()),n=B(),m=b(),h=b(""),u=Object.assign({"./docs/getting-started.md":Be}),r=Object.entries(u).map(([d,T])=>{const{attributes:A}=T;return{title:A.title,key:d}})||[];h.value=(v=r[0])==null?void 0:v.key;const g=N(()=>{const{VueComponentWith:d}=u[h.value];return d({CodeEditor:je})}),p=d=>{[h.value]=d};return J(async()=>{n.lifetime==="temporary"&&t.value&&(await Ue("https://www.google.com/recaptcha/api.js?render=6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A"),window.grecaptcha.ready(async()=>{try{const d=await window.grecaptcha.execute(_,{action:"submit"}),T=await xe(d,n.dbId)}catch{m.value.toggleModal()}}))}),(d,T)=>{const A=y("a-tree"),P=y("a-layout-sider"),x=Ne,O=y("a-layout-content"),I=y("a-layout");return f(),S(I,{class:"layout"},{default:o(()=>[s(P,null,{default:o(()=>[s(A,{class:"script-tree",blockNode:"",data:l(r),"default-selected-keys":[l(h)],onSelect:p},null,8,["data","default-selected-keys"])]),_:1}),s(O,null,{default:o(()=>[e("div",Ke,[l(g)?(f(),S(l(g),{key:0})):w("",!0)]),s(x,{ref_key:"refreshPlaygroundModal",ref:m},null,512)]),_:1})]),_:1})}}});const Ze=F(Ye,[["__scopeId","data-v-5e53c67e"]]);export{Ze as default};
