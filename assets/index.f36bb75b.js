import{aG as y,B as h,C as R,aH as a,aF as o,aJ as W,G as q,F as e,aK as s,d as N,r as b,aD as T,aL as D,u as l,j as M,b4 as X,c as U,aE as w,o as J}from"./arco.e8535106.js";import{p as V,u as B,b as Z,_ as G}from"./index.fe87ae79.js";import{s as ee}from"./vue.01353f09.js";import{o as te,T as oe,u as ae,d as se,e as ne,_ as le}from"./index.38e526f1.js";import{s as re}from"./index.c26d8d29.js";import"./chart.3c0feddf.js";const ce={title:"Quick Start"},de=q('<h1>Getting Started</h1><h2>Preface</h2><p>Greetings from Greptime Play! Apart from just following a word-document guide, this interactive playground will quickly familiarize you with GreptimeDB and help you to get the most out of it.</p><div class="tip custom-block"><p class="custom-block-title">Cool feature alert:</p><p>all code blocks in this guide are editable and executable!</p></div><p>By hitting the <code>Run</code> button, the code will be executed and run in a temporary, private instance generated from <a href="https://greptime.com/product/cloud">GreptimeCloud</a>. <strong>You can also explore and experiment with different ideas by editing the codes.</strong></p><div class="danger custom-block"><p class="custom-block-title">Note that:</p><p>The instance is valid within <strong>1 hour</strong> once initiated, and you will need to create a new one when the time is up. So please never store important data in Greptime Play sessions.</p></div><h2>Create a Time-Series Table</h2><p>Let&#39;s start the journey by creating a simple <code>system_metrics</code> table first. Note that we pre-defined <code>host</code> and <code>idc</code> as the primary keys; <code>ts</code> as time index, both are important to know in GreptimeDB. Click <code>Run</code> on the upper left in the panel below to create the table:</p>',8),ie=e("pre",null,[e("code",{class:"language-sql"},`CREATE TABLE IF NOT EXISTS system_metrics (
    host STRING,
    idc STRING,
    cpu_util DOUBLE,
    memory_util DOUBLE,
    disk_util DOUBLE,
    ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY(host, idc),
    TIME INDEX(ts)
);
`)],-1),ue=q("<p>Once the green marker appears, run <code>DESC TABLE</code> to view the details of the table.</p><p>In GreptimeDB, there are three types of columns:</p><ul><li><code>PRIMARY KEY</code>: key columns that are used for sorting and partitioning</li><li><code>FIELD</code>: columns which store table values</li><li><code>TIME INDEX</code>: columns of data type TIME</li></ul>",3),_e=e("pre",null,[e("code",{class:"language-sql"},`DESC TABLE system_metrics;
`)],-1),pe=e("h2",null,"Add Some Data",-1),me=e("p",null,[s("Using the "),e("code",null,"INSERT"),s(" statement to easily add data to the table. Below example inserts three rows into the "),e("code",null,"system_metrics"),s(" table.")],-1),he=e("pre",null,[e("code",{class:"language-sql"},`INSERT INTO system_metrics
VALUES
    ("host1", "idc_a", 11.8, 10.3, 10.3, 1667446791450),
    ("host2", "idc_a", 80.1, 70.3, 90.0, 1667446792460),
    ("host1", "idc_b", 50.0, 66.7, 40.6, 1667446793470);
`)],-1),ge=e("p",null,"Ingest more entries by modifying the values and timestamps.",-1),fe=e("pre",null,[e("code",{class:"language-sql"},`INSERT INTO system_metrics
VALUES
    ("host1", "idc_a", 30.2, 50.1, 11.0, 1667446794480),
    ("host2", "idc_a", 60.8, 74.9, 96.2, 1667446795490),
    ("host1", "idc_b", 30.0, 65.7, 40.2, 1667446796500);
`)],-1),ye=e("h2",null,"Query Data with SQL",-1),be=e("p",null,"GreptimeDB fully supports SQL.",-1),ve=e("pre",null,[e("code",{class:"language-sql"},`SELECT * FROM system_metrics ORDER BY ts DESC;
`)],-1),Ee=e("p",null,[s("We list some SQL examples below of the "),e("code",null,"system_metrics"),s(" table, for you to get familiar with using SQL alongside GreptimeDB's functions.")],-1),we=e("p",null,[s("Use "),e("code",null,"count()"),s(" function to get the number of all rows in the table:")],-1),Te=e("pre",null,[e("code",{class:"language-sql"},`SELECT count(*) FROM system_metrics;
`)],-1),Ce=e("p",null,[s("The "),e("code",null,"avg()"),s(" function returns the average value of a certain field:")],-1),Ae=e("pre",null,[e("code",{class:"language-sql"},`SELECT avg(cpu_util) FROM system_metrics;
`)],-1),Se=e("p",null,[s("Use the "),e("code",null,"GROUP BY"),s(" clause to group rows that have the same values into summary rows. The code below groups average memory usage by "),e("code",null,"idc"),s(":")],-1),ke=e("pre",null,[e("code",{class:"language-sql"},`SELECT idc, avg(memory_util) FROM system_metrics GROUP BY idc;
`)],-1),Re=q("<p>There are more aggregate functions available, change <code>avg</code> to any of these below and try out:</p><p><code>max</code> / <code>min</code> / <code>sum</code> / <code>mean</code></p><h2>Try it Out</h2><p>Please start exploring by writing some queries in the panel below!</p>",4),Ie=e("pre",null,[e("code",{class:"language-sql"},`
`)],-1),Le=e("p",null,[s("For other advanced features like scripting and protocol supports, "),e("a",{href:"https://greptime.com/download/"},"Download"),s(" and run GreptimeDB locally by following "),e("a",{href:"https://docs.greptime.com"},"docs"),s(".")],-1);function F(i,_){const t=y("code-editor");return h(),R(W,null,[de,a(t,{lang:"sql"},{default:o(()=>[ie]),_:1}),ue,a(t,{lang:"sql"},{default:o(()=>[_e]),_:1}),pe,me,a(t,{lang:"sql"},{default:o(()=>[he]),_:1}),ge,a(t,{lang:"sql"},{default:o(()=>[fe]),_:1}),ye,be,a(t,{lang:"sql"},{default:o(()=>[ve]),_:1}),Ee,we,a(t,{lang:"sql"},{default:o(()=>[Te]),_:1}),Ce,a(t,{lang:"sql"},{default:o(()=>[Ae]),_:1}),Se,a(t,{lang:"sql"},{default:o(()=>[ke]),_:1}),Re,a(t,{lang:"sql"},{default:o(()=>[Ie]),_:1}),Le],64)}const $={render:F};$.__hmrId="/home/runner/work/dashboard/dashboard/src/views/dashboard/playground/docs/getting-started.md";const De=i=>({components:i,render:F}),Be=Object.freeze(Object.defineProperty({__proto__:null,attributes:ce,VueComponent:$,VueComponentWith:De},Symbol.toStringTag,{value:"Module"})),Pe="https://api.greptime.cloud",j=`${Pe}/playground/db`,Oe=(i,_)=>V.get(j,{params:{token:i,db_id:_}}),xe=i=>V.post(j,{},{params:{token:i}}),Ue=N({__name:"index",props:{visible:{type:Boolean,default:!1}},setup(i,{expose:_}){B();const t=b(!1),{VITE_RECAPTCHA_SITE_KEY:n}={VITE_CLOUD_URL:"https://dev.greptime-cloud-frontend.pages.dev",VITE_API_BASE_URL:"https://api.greptime.cloud",VITE_RECAPTCHA_SITE_KEY:"6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},g=()=>{t.value=!t.value},p=()=>{window.grecaptcha.ready(async()=>{const u=await window.grecaptcha.execute(n,{action:"submit"}),c=await xe(u),f=btoa(JSON.stringify({username:c.username,password:c.password,database:`${c.teamId}-${c.serviceName}`,dbId:c.dbId}));window.location.href=`https://${Object.values(c.domain)[0]}/dashboard/playground?info=${f}`})};return _({toggleModal:g}),(u,c)=>{const f=y("a-modal");return h(),T(f,{class:"guide-modal",visible:l(t),"onUpdate:visible":c[0]||(c[0]=m=>M(t)?t.value=m:null),"mask-closable":!1,"ok-text":u.$t("playground.create"),"hide-cancel":!0,closable:!1,onOk:p},{title:o(()=>[s(D(u.$t("playground.refeshTitle")),1)]),footer:o(()=>[]),default:o(()=>[s(D(u.$t("playground.refeshNote")),1)]),_:1},8,["visible","ok-text"])}}}),qe=i=>new Promise((_,t)=>{var g;const n=document.createElement("script");n.src=i,n.type="text/javascript",n.defer=!0,(g=document.getElementsByTagName("head").item(0))==null||g.appendChild(n),n.onload=()=>{_(n)},n.onerror=()=>{t()}}),Ne={class:"code-editor"},Me={class:"code"},Ve={key:0,class:"operations"},Ge={key:0,class:"results"},Fe={key:1,class:"logs"},$e=N({__name:"code-editor",props:{disabled:{type:Boolean,default:!1}},setup(i){var I;const _=b(!1),{runQuery:t}=Z(),n=X(),g=B(),p=b(),u=b();function c(r){var E,L;return r?(r=(L=(E=r==null?void 0:r[0])==null?void 0:E.children[0])==null?void 0:L.children,Object.keys(g).forEach(k=>{r=r.replace(new RegExp(`{{${k}}}`,"g"),g[k])}),r):""}const f=c((I=n==null?void 0:n.default)==null?void 0:I.call(n)),m=b(f),v=b(),d=b(),C=()=>{m.value=f,v.value=null,d.value=null,p.value=!1,u.value=!1},A=async()=>{_.value=!0;const r=await t(m.value.trim().replace(/\n/gi," "),"sql",!0);v.value=r.record;const{hasChart:S,hasGrid:E}=ae(v.value);d.value=r.log,p.value=r.record&&S.value,u.value=E.value,_.value=!1},P=U(()=>m.value!==f),O=U(()=>m.value.trim()===""),x=[re(),te];return(r,S)=>{const E=y("a-button"),L=se,k=y("a-tab-pane"),K=ne,Y=y("a-tabs"),Q=le,H=y("a-list");return h(),R("div",Ne,[e("div",Me,[i.disabled?w("",!0):(h(),R("div",Ve,[a(E,{disabled:l(O),loading:l(_),onClick:A},{default:o(()=>[s(D(r.$t("playground.run")),1)]),_:1},8,["disabled","loading"]),l(P)?(h(),T(E,{key:0,onClick:C},{default:o(()=>[s(D(r.$t("playground.reset")),1)]),_:1})):w("",!0)])),a(l(oe),{modelValue:l(m),"onUpdate:modelValue":S[0]||(S[0]=z=>M(m)?m.value=z:null),extensions:x,disabled:i.disabled},null,8,["modelValue","disabled"])]),l(u)||l(p)?(h(),R("div",Ge,[a(Y,{class:"playground-tabs","default-active-key":"1"},{default:o(()=>[l(u)?(h(),T(k,{key:"1",title:"Table"},{default:o(()=>[a(L,{data:l(v),hasHeader:!1},null,8,["data"])]),_:1})):w("",!0),l(p)?(h(),T(k,{key:"2",title:"Chart"},{default:o(()=>[a(K,{data:l(v),hasHeader:!1},null,8,["data"])]),_:1})):w("",!0)]),_:1})])):w("",!0),l(d)?(h(),R("div",Fe,[a(H,{class:"log-list",size:"small",hoverable:!0,bordered:!1,split:!1},{default:o(()=>[a(Q,{codeType:"sql",log:l(d)},null,8,["log"])]),_:1})])):w("",!0)])}}});const je=G($e,[["__scopeId","data-v-76faa72c"]]),Ke={class:"markdown-container"},Ye=N({__name:"index",setup(i){var v;const{VITE_RECAPTCHA_SITE_KEY:_}={VITE_CLOUD_URL:"https://dev.greptime-cloud-frontend.pages.dev",VITE_API_BASE_URL:"https://api.greptime.cloud",VITE_RECAPTCHA_SITE_KEY:"6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},{isCloud:t}=ee(B()),n=B(),g=b(),p=b(""),u=Object.assign({"./docs/getting-started.md":Be}),c=Object.entries(u).map(([d,C])=>{const{attributes:A}=C;return{title:A.title,key:d}})||[];p.value=(v=c[0])==null?void 0:v.key;const f=U(()=>{const{VueComponentWith:d}=u[p.value];return d({CodeEditor:je})}),m=d=>{[p.value]=d};return J(async()=>{n.lifetime==="temporary"&&t.value&&(await qe("https://www.google.com/recaptcha/api.js?render=6LcsBPgkAAAAAKiPrwh3pFCKpv9hc62eRhL5bj5A"),window.grecaptcha.ready(async()=>{try{const d=await window.grecaptcha.execute(_,{action:"submit"}),C=await Oe(d,n.dbId)}catch{g.value.toggleModal()}}))}),(d,C)=>{const A=y("a-tree"),P=y("a-layout-sider"),O=Ue,x=y("a-layout-content"),I=y("a-layout");return h(),T(I,{class:"layout"},{default:o(()=>[a(P,null,{default:o(()=>[a(A,{class:"script-tree",blockNode:"",data:l(c),"default-selected-keys":[l(p)],onSelect:m},null,8,["data","default-selected-keys"])]),_:1}),a(x,null,{default:o(()=>[e("div",Ke,[l(f)?(h(),T(l(f),{key:0})):w("",!0)]),a(O,{ref_key:"refreshPlaygroundModal",ref:g},null,512)]),_:1})]),_:1})}}});const Ze=G(Ye,[["__scopeId","data-v-5e53c67e"]]);export{Ze as default};
