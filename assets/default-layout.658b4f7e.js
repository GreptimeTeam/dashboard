import{c as y,d as I,e as B,aH as i,aG as b,aT as Q,h as N,aU as O,B as x,aD as S,aF as v,aK as ee,u as m,F as E,D as K,aL as te,aV as ae,aW as W,aX as H,w as ne,b as oe,C as P,aJ as se,aI as ue,o as ce,aY as re,aZ as ie,a_ as U,a$ as le,b0 as de,aE as T,b1 as pe,b2 as fe,E as V,p as _e}from"./arco.3c724825.js";import{u as F,f as A,g as he}from"./vue.45804b29.js";import{a as ve,b as me,u as J,c as R,d as be,l as q,_ as $,e as z,R as ye,D as ge,r as xe,f as Ce}from"./index.d78a3c4a.js";import{N as Ee}from"./index.53a48855.js";import"./chart.0b770fd8.js";const we=(a,t)=>{const{target:s="_blank",...c}=t||{};window.open(a,s,Object.entries(c).reduce((u,h)=>{const[r,d]=h;return[...u,`${r}=${d}`]},[]).join(","))},Se=new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),ke=[...ve,...me],De=ke.map(a=>{const{name:t,path:s,meta:c,redirect:u,children:h}=a;return{name:t,path:s,meta:c,redirect:u,children:h}}),Le=De;function Me(){const a=J(),t=R(),s=y(()=>t.menuFromServer?t.appAsyncMenus:Le);return{menuTree:y(()=>{const u=JSON.parse(JSON.stringify(s.value));u.sort((r,d)=>(r.meta.order||0)-(d.meta.order||0));function h(r,d){return r?r.map(p=>{var w,o;if(!a.accessRouter(p))return null;if(((w=p.meta)==null?void 0:w.hideChildrenInMenu)||!p.children)return p.children=[],p;p.children=p.children.filter(_=>{var n;return((n=_.meta)==null?void 0:n.hideInMenu)!==!0});const k=h(p.children,d+1);return k.length||d>1?(p.children=k,p):((o=p.meta)==null?void 0:o.hideInMenu)===!1?p:null}).filter(Boolean):null}return h(u,0)})}}function Te(a){return typeof a=="function"||Object.prototype.toString.call(a)==="[object Object]"&&!Q(a)}const Ie=I({emit:["collapse"],setup(){const{t:a}=be(),t=R(),s=F(),c=A(),{menuTree:u}=Me(),h=y({get(){return t.device==="desktop"?t.menuCollapse:!1},set(o){t.updateSettings({menuCollapse:o})}}),r=B([]),d=B([]),D=o=>{if(Se.test(o.path)){we(o.path),d.value=[o.name];return}const{hideInMenu:_,activeMenu:n}=o.meta;if(c.name===o.name&&!_&&!n){d.value=[o.name];return}s.push({name:o.name})},p=o=>{const _=[];let n=!1;const e=(l,g,f)=>{var C;if(l.name===f){n=!0,_.push(...g,l.name);return}(C=l.children)!=null&&C.length&&l.children.forEach(L=>{e(L,[...g],f)})};return u.value.forEach(l=>{n||e(l,[l.name],o)}),_};q(o=>{const{requiresAuth:_,activeMenu:n,hideInMenu:e}=o.meta;if(_&&(!e||n)){const l=p(n||o.name),g=new Set([...l,...r.value]);r.value=[...g],d.value=[n||l[l.length-1]]}},!0);const k=o=>{t.device==="desktop"&&t.updateSettings({menuCollapse:o})},w=()=>{function o(_,n=[]){return _&&_.forEach(e=>{var f;const l=(f=e==null?void 0:e.meta)!=null&&f.icon?()=>{var C;return N(O(`<${(C=e==null?void 0:e.meta)==null?void 0:C.icon}/>`))}:null,g=(e==null?void 0:e.children)&&(e==null?void 0:e.children.length)!==0?i(b("a-sub-menu"),{key:e==null?void 0:e.name},{default:()=>[o(e==null?void 0:e.children)],icon:l,title:()=>{var C;return N(O(a(((C=e==null?void 0:e.meta)==null?void 0:C.locale)||"")))}}):i(b("a-menu-item"),{key:e==null?void 0:e.name,onClick:()=>D(e)},{default:()=>{var C;return[a(((C=e==null?void 0:e.meta)==null?void 0:C.locale)||"")]},icon:l});n.push(g)}),n}return o(u.value)};return()=>{let o;return i(b("a-menu"),{collapsed:h.value,"onUpdate:collapsed":_=>h.value=_,"open-keys":r.value,"onUpdate:open-keys":_=>r.value=_,"show-collapse-button":t.device!=="mobile","auto-open":!1,"selected-keys":d.value,"auto-open-selected":!0,"level-indent":34,style:"height: 100%",onCollapse:k},Te(o=w())?o:{default:()=>[o]})}}});const j=$(Ie,[["__scopeId","data-v-61afee34"]]);const Re={};function $e(a,t){const s=b("a-layout-footer");return x(),S(s,{class:"footer"},{default:v(()=>[ee("\xA9Copyright 2022 Greptime Inc. All Rights Reserved")]),_:1})}const Be=$(Re,[["render",$e],["__scopeId","data-v-d90f7d0d"]]),M=a=>(W("data-v-782a27ce"),a=a(),H(),a),Pe={class:"tag-link"},Fe=M(()=>E("span",null,"\u91CD\u65B0\u52A0\u8F7D",-1)),Ae=M(()=>E("span",null,"\u5173\u95ED\u5F53\u524D\u6807\u7B7E\u9875",-1)),ze=M(()=>E("span",null,"\u5173\u95ED\u5DE6\u4FA7\u6807\u7B7E\u9875",-1)),Ne=M(()=>E("span",null,"\u5173\u95ED\u53F3\u4FA7\u6807\u7B7E\u9875",-1)),Oe=M(()=>E("span",null,"\u5173\u95ED\u5176\u5B83\u6807\u7B7E\u9875",-1)),Ue=M(()=>E("span",null,"\u5173\u95ED\u5168\u90E8\u6807\u7B7E\u9875",-1)),Ve=I({__name:"tab-item",props:{itemData:{type:Object,default(){return[]}},index:{type:Number,default:0}},setup(a){const t=a,s=F(),c=A(),u=z(),h=n=>{s.push({...n})},r=y(()=>u.getTabList),d=y(()=>t.itemData.fullPath!==c.fullPath),D=y(()=>t.index===0),p=y(()=>[0,1].includes(t.index)),k=y(()=>t.index===r.value.length-1),w=(n,e)=>{if(u.deleteTag(e,n),t.itemData.fullPath===c.fullPath){const l=r.value[e-1];s.push({name:l.name})}},o=()=>r.value.findIndex(n=>n.fullPath===c.fullPath),_=async n=>{const{itemData:e,index:l}=t,g=[...r.value];if(n==="current")w(e,l);else if(n==="left"){const f=o();g.splice(1,t.index-1),u.freshTabList(g),f<l&&s.push({name:e.name})}else if(n==="right"){const f=o();g.splice(t.index+1),u.freshTabList(g),f>l&&s.push({name:e.name})}else if(n==="others"){const f=r.value.filter((C,L)=>L===0||L===t.index);u.freshTabList(f),s.push({name:e.name})}else n==="reload"?(u.deleteCache(e),await s.push({name:ye,params:{path:c.fullPath}}),u.addCache(e.name)):(u.resetTabList(),s.push({name:ge}))};return(n,e)=>{const l=b("icon-close"),g=b("icon-refresh"),f=b("a-doption"),C=b("icon-to-left"),L=b("icon-to-right"),G=b("icon-swap"),X=b("icon-folder-delete"),Y=b("a-dropdown");return x(),S(Y,{trigger:"contextMenu","popup-max-height":!1,onSelect:_},{content:v(()=>[i(f,{disabled:m(d),value:"reload"},{default:v(()=>[i(g),Fe]),_:1},8,["disabled","value"]),i(f,{class:"sperate-line",disabled:m(D),value:"current"},{default:v(()=>[i(l),Ae]),_:1},8,["disabled","value"]),i(f,{disabled:m(p),value:"left"},{default:v(()=>[i(C),ze]),_:1},8,["disabled","value"]),i(f,{class:"sperate-line",disabled:m(k),value:"right"},{default:v(()=>[i(L),Ne]),_:1},8,["disabled","value"]),i(f,{value:"others"},{default:v(()=>[i(G),Oe]),_:1},8,["value"]),i(f,{value:"all"},{default:v(()=>[i(X),Ue]),_:1},8,["value"])]),default:v(()=>[E("span",{class:K(["arco-tag arco-tag-size-medium arco-tag-checked",{"link-activated":a.itemData.fullPath===n.$route.fullPath}]),onClick:e[1]||(e[1]=Z=>h(a.itemData))},[E("span",Pe,te(n.$t(a.itemData.title)),1),E("span",{class:"arco-icon-hover arco-tag-icon-hover arco-icon-hover-size-medium arco-tag-close-btn",onClick:e[0]||(e[0]=ae(Z=>w(a.itemData,a.index),["stop"]))},[i(l)])],2)]),_:1})}}});const je=$(Ve,[["__scopeId","data-v-782a27ce"]]),Ke=a=>(W("data-v-12079b21"),a=a(),H(),a),We={class:"tab-bar-container"},He={class:"tab-bar-box"},Je={class:"tab-bar-scroll"},qe={class:"tags-wrap"},Ge=Ke(()=>E("div",{class:"tag-bar-operation"},null,-1)),Xe=I({__name:"index",setup(a){const t=R(),s=z(),c=B(),u=y(()=>s.getTabList),h=y(()=>t.navbar?60:0);return ne(()=>t.navbar,()=>{c.value.updatePosition()}),q(r=>{!r.meta.noAffix&&!u.value.some(d=>d.fullPath===r.fullPath)&&s.updateTabList(r)},!0),oe(()=>{xe()}),(r,d)=>{const D=b("a-affix");return x(),P("div",We,[i(D,{ref_key:"affixRef",ref:c,"offset-top":m(h)},{default:v(()=>[E("div",He,[E("div",Je,[E("div",qe,[(x(!0),P(se,null,ue(m(u),(p,k)=>(x(),S(je,{key:p.fullPath,index:k,"item-data":p},null,8,["index","item-data"]))),128))])]),Ge])]),_:1},8,["offset-top"])])}}});const Ye=$(Xe,[["__scopeId","data-v-12079b21"]]);function Ze(a,t,s,c=!1){a.addEventListener&&typeof a.addEventListener=="function"&&a.addEventListener(t,s,c)}function Qe(a,t,s,c=!1){a.removeEventListener&&typeof a.removeEventListener=="function"&&a.removeEventListener(t,s,c)}const et=992;function tt(){return document.body.getBoundingClientRect().width-1<et}function at(a){const t=R();function s(){if(!document.hidden){const u=tt();t.toggleDevice(u?"mobile":"desktop"),t.toggleMenu(u)}}const c=he(s,100);ce(()=>{a&&c()}),re(()=>{Ze(window,"resize",c)}),ie(()=>{Qe(window,"resize",c)})}const nt=I({__name:"page-layout",setup(a){const t=z(),s=y(()=>t.getCacheList);return(c,u)=>{const h=b("router-view");return x(),S(h,null,{default:v(({Component:r,route:d})=>[i(de,{name:"fade",mode:"out-in",appear:""},{default:v(()=>[d.meta.ignoreCache?(x(),S(U(r),{key:d.fullPath})):(x(),S(le,{key:1,include:m(s)},[(x(),S(U(r),{key:d.fullPath}))],1032,["include"]))]),_:2},1024)]),_:1})}}}),ot={key:0,class:"layout-navbar"},st={class:"menu-wrapper"},ut=I({__name:"default-layout",setup(a){const t=R();Ce(),F(),A(),J(),at(!0);const s="60px",c=y(()=>t.navbar),u=y(()=>t.menu),h=y(()=>t.hideMenu),r=y(()=>t.footer),d=y(()=>t.menuCollapse?48:t.menuWidth),D=y(()=>t.menuCollapse),p=y(()=>{const _=u.value&&!h.value?{paddingLeft:`${d.value}px`}:{},n=c.value?{paddingTop:s}:{};return{..._,...n}}),k=_=>{t.updateSettings({menuCollapse:_})},w=B(!1),o=()=>{w.value=!1};return _e("toggleDrawerMenu",()=>{w.value=!w.value}),(_,n)=>{const e=b("a-layout-sider"),l=b("a-drawer"),g=b("a-layout-content"),f=b("a-layout");return x(),S(f,{class:K(["layout",{mobile:m(t).hideMenu}])},{default:v(()=>[m(c)?(x(),P("div",ot,[i(Ee)])):T("",!0),i(f,null,{default:v(()=>[i(f,null,{default:v(()=>[m(u)?pe((x(),S(e,{key:0,class:"layout-sider",breakpoint:"xl",collapsed:m(D),collapsible:!0,width:m(d),style:V({paddingTop:m(c)?"60px":""}),"hide-trigger":!0,onCollapse:k},{default:v(()=>[E("div",st,[i(j)])]),_:1},8,["collapsed","width","style"])),[[fe,!m(h)]]):T("",!0),m(h)?(x(),S(l,{key:1,visible:w.value,placement:"left",footer:!1,"mask-closable":"",closable:!1,onCancel:o},{default:v(()=>[i(j)]),_:1},8,["visible"])):T("",!0),i(f,{class:"layout-content",style:V(m(p))},{default:v(()=>[m(t).tabBar?(x(),S(Ye,{key:0})):T("",!0),i(g,null,{default:v(()=>[i(nt)]),_:1}),m(r)?(x(),S(Be,{key:1})):T("",!0)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1},8,["class"])}}});const pt=$(ut,[["__scopeId","data-v-2a137b0d"]]);export{pt as default};
